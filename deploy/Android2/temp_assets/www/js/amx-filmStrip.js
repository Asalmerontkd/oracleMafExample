(function(){function b(){h={}}var c=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"dottedPageControl"),a={start:amx.hasTouch()?"touchstart":"mousedown",end:amx.hasTouch()?"touchend":"mouseup",move:amx.hasTouch()?"touchmove":"mousemove",cancel:amx.hasTouch()?"touchcancel":"mouseleave"};c.prototype.render=function(a,b){return document.createElement("div")};var e=function(a){return{vertical:a.vertical||!1,pageCount:a.pageCount||0,currentIndex:a.currentIndex||0,lastGroupBehavior:"full"===
a.lastGroupBehavior?"full":"remaining",dotsPerGroup:Math.max(1,parseInt(a.dotsPerGroup)||10),displayArrowLabels:function(a){return"inside"===a||"outside"===a?a:"none"}(a.displayArrowLabels),on:function(a){return a&&"function"===typeof a.pagechange?{pagechange:a.pagechange}:{pagechange:function(a){}}}(a.on)}};c.prototype.__getRefreshProperty=function(){return"__refreshPageState"};var d=function(a){return(a=a.getTypeHandler())?adf.mf.internal.amx.implementsFunction(a,"getPageCount")&&adf.mf.internal.amx.implementsFunction(a,
"getCurrentPageIndex")&&adf.mf.internal.amx.implementsFunction(a,"setCurrentPageByIndex")?!0:!1:!1};c.prototype.postDisplay=function(a,b){var c=b.getParent();if(d(c)){var e=c.getTypeHandler(),h={vertical:"vertical"===c.getAttribute("orientation"),pageCount:e.getPageCount(c),currentIndex:e.getCurrentPageIndex(c),lastGroupBehavior:b.getAttribute("lastPageSetBehavior"),dotsPerGroup:b.getAttribute("dotsInPageSet"),displayArrowLabels:b.getAttribute("displayPageCount"),on:{pagechange:function(a){e.setCurrentPageByIndex(c,
a,!0)}}};g(a,c,h)}};c.prototype.updateChildren=function(a,b){a.getParent().setAttributeResolvedValue("_currentPosition",null);return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};var g=function(b,c,d){d=e(d);if(b&&c){var g=d.pageCount,h=d.currentIndex,m=d.displayArrowLabels,n=d.vertical,t=c.getAttribute("_currentPosition"),u=!1,v,w=0,y=h+"/"+g;if(t!==y){t=function(a,b){return function(c){c.data&&"tapHold"==c.data.type&&null!=b&&(a=b);c.stopPropagation();c.preventDefault();d.on.pagechange(a)}};c.setAttributeResolvedValue("_currentPosition",
y);v=d.lastGroupBehavior;var x=d.dotsPerGroup,y=Math.floor(h/x),L=c.getAttribute("_currentGroupIndex")||0;"remaining"!==v&&1===Math.abs(L-y)&&h>=g-x&&h<Math.floor(g/x)*x&&(y=L);null!=L&&L!=y&&(u=!0);c.setAttributeResolvedValue("_currentGroupIndex",y);var G=v!==c.getAttribute("_prevLastGroupBehavior");c.setAttributeResolvedValue("_prevLastGroupBehavior",v);"remaining"===v?v=Math.min(g-y*x,x):(v=Math.min(g,x),w=Math.min(g-y*x,x),w=v-w);n?b.classList.add("vertical"):b.classList.remove("vertical");var A=
b.querySelector(".amx-dottedPageControl_startArrow");if(!A){A=document.createElement("div");A.className="amx-dottedPageControl_startArrow amx-filmStrip_pageControlButton";var z=document.createElement("div");z.className="amx-filmStrip_pageControlButton-chevron";A.appendChild(z);b.firstElementChild?b.insertBefore(A,b.firstElementChild):b.appendChild(A)}var F=b.querySelector(".amx-dottedPageControl_endArrow");F||(F=document.createElement("div"),F.className="amx-dottedPageControl_endArrow amx-filmStrip_pageControlButton",
z=document.createElement("div"),z.className="amx-filmStrip_pageControlButton-chevron",F.appendChild(z),b.appendChild(F));z=b.querySelector(".amx-dottedPageControl_dotsContainer \x3e .amx-dottedPageControl_dots");if(!z){var E=document.createElement("div");E.className="amx-dottedPageControl_dotsContainer";z=document.createElement("div");z.className="amx-dottedPageControl_dots";E.appendChild(z);b.insertBefore(E,F)}if(0<y){A.classList.add("enabled");b=A.querySelector(".amx-filmStrip_pageControlButton-label");
adf.mf.api.amx.removeDomNode(b);"none"!==m&&(b=document.createElement("div"),"inside"===m?(b.className="amx-filmStrip_pageControlButton-label inside",A.appendChild(b)):(b.className="amx-filmStrip_pageControlButton-label outside",A.insertBefore(b,A.firstElementChild)),b.textContent=""+(y*x-w));if(b=c.getAttribute("_saListener"))adf.mf.api.amx.removeBubbleEventListener(A,a.start,b.start),adf.mf.api.amx.removeBubbleEventListener(A,a.end,b.end),adf.mf.api.amx.removeBubbleEventListener(A,a.cancel,b.cancel);
b=t(y*x-1-w,x-1);k(A,function(b,d,e){c.setAttributeResolvedValue("_saListener",{start:b,end:d,cancel:e});adf.mf.api.amx.addBubbleEventListener(A,a.start,b);adf.mf.api.amx.addBubbleEventListener(A,a.end,d);adf.mf.api.amx.addBubbleEventListener(A,a.cancel,e)},b)}else{if(b=c.getAttribute("_saListener"))c.setAttributeResolvedValue("_saListener",null),adf.mf.api.amx.removeBubbleEventListener(A,a.start,b.start),adf.mf.api.amx.removeBubbleEventListener(A,a.end,b.end),adf.mf.api.amx.removeBubbleEventListener(A,
a.cancel,b.cancel);A.classList.remove("enabled")}if(y<Math.floor((g-1)/x)){F.classList.add("enabled");b=F.querySelector(".amx-filmStrip_pageControlButton-label");adf.mf.api.amx.removeDomNode(b);"none"!==m&&(b=document.createElement("div"),"inside"===m?(b.className="amx-filmStrip_pageControlButton-label inside",F.insertBefore(b,F.firstElementChild)):(b.className="amx-filmStrip_pageControlButton-label outside",F.appendChild(b)),b.textContent=""+(g-(y+1)*x));if(b=c.getAttribute("_eaListener"))adf.mf.api.amx.removeBubbleEventListener(F,
a.start,b.start),adf.mf.api.amx.removeBubbleEventListener(F,a.end,b.end),adf.mf.api.amx.removeBubbleEventListener(F,a.cancel,b.cancel);b=t((y+1)*x,Math.floor(g/x)*x);k(F,function(b,d,e){c.setAttributeResolvedValue("_eaListener",{start:b,end:d,cancel:e});adf.mf.api.amx.addBubbleEventListener(F,a.start,b);adf.mf.api.amx.addBubbleEventListener(F,a.end,d);adf.mf.api.amx.addBubbleEventListener(F,a.cancel,e)},b)}else{if(b=c.getAttribute("_eaListener"))c.setAttributeResolvedValue("_eaListener",null),adf.mf.api.amx.removeBubbleEventListener(F,
a.start,b.start),adf.mf.api.amx.removeBubbleEventListener(F,a.end,b.end),adf.mf.api.amx.removeBubbleEventListener(F,a.cancel,b.cancel);F.classList.remove("enabled")}if(u){z.classList.add("old");g=document.createElement("div");g.className="amx-dottedPageControl_dots new";for(m=0;m<v;m++)u=document.createElement("div"),u.className="amx-dottedPageControl_dot amx-filmStrip_pageControlButton",G=document.createElement("div"),G.className="amx-filmStrip_pageControlButton-chevron",u.appendChild(G),b=y*x+m-
w,h===b&&u.classList.add("selected"),adf.mf.api.amx.addBubbleEventListener(u,a.start,t(b)),g.appendChild(u);z.parentElement.appendChild(g);h={parentFlipAllowed:!1,dimensionsFromParent:!1};h.finishedFunction=adf.shared.impl.animationUtils.getProxyFunction(this,function(a){var b=a[0],c=a[2];if(a=a[1].parentNode){a=a.childNodes;for(var e=a.length;0<=e;--e){var g=a[e];g!=b&&adf.mf.api.amx.removeDomNode(g)}}b.classList.remove("new");d.on.pagechange=c});h.callbackParams=[g,z,d.on.pagechange];h.animationEnabled=
!0;h.isRtl="rtl"==document.documentElement.dir;h.fineLogger=function(a){adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.internal.amx.deck","refresh",a)};n=n?["slideDown","slideUp"]:["slideRight","slideLeft"];d.on.pagechange=function(){};adf.shared.impl.animationUtils.transition(L>y?n[0]:n[1],z,g,h)}else{G&&adf.mf.api.amx.emptyHtmlElement(z);n=[];m=0;for(L=Math.max(v,z.childNodes.length);m<L;m++)b=y*x+m-w,u=z.childNodes[m],v<=m?u&&(n.push(u),u=null):u||(u=document.createElement("div"),u.className=
"amx-dottedPageControl_dot amx-filmStrip_pageControlButton",G=document.createElement("div"),G.className="amx-filmStrip_pageControlButton-chevron",u.appendChild(G),adf.mf.api.amx.addBubbleEventListener(u,a.start,t(b)),z.appendChild(u)),u&&(h===b?u.classList.add("selected"):u.classList.remove("selected"));n.forEach(function(a){adf.mf.api.amx.removeDomNode(a)})}}}};c.prototype.refresh=function(a,b){var c=a.getParent();if(d(c)){var e=c.getTypeHandler();document.getElementById(a.getId());var h={vertical:"vertical"===
c.getAttribute("orientation"),pageCount:e.getPageCount(c),currentIndex:e.getCurrentPageIndex(c),lastGroupBehavior:a.getAttribute("lastPageSetBehavior"),dotsPerGroup:a.getAttribute("dotsInPageSet"),displayArrowLabels:a.getAttribute("displayPageCount"),on:{pagechange:function(a){e.setCurrentPageByIndex(c,a,!0)}}};g(document.getElementById(a.getId()),c,h)}};c.prototype.destroy=function(a,b){var c=b.getParent();c.setAttributeResolvedValue("_currentGroupIndex",null);c.setAttributeResolvedValue("_currentPosition",
null);c.setAttributeResolvedValue("_prevGroupBehavior",null)};var h={},k=function(a,c,d,e){e=e||{};var g=null;c.call(this,function(b){g=amx.uuid();h[g]=(new Date).getTime();setTimeout(function(){if(0<h[g]){delete h[g];var c=b.data;b.data=e;b.data.type="tapHold";d.call(a,b);b.data=c}},800)},function(b){if(h[g]){delete h[g];var c=b.data;b.data=e;b.data.type="click";d.call(a,b);b.data=c}},b)},m=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"filmStripItem");m.prototype.createChildrenNodes=
function(a){return!0===a.getAttribute("_visible")?adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.NONE:adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.HANDLED};m.prototype.render=function(a,b){var c=a.getAttribute("shortDesc"),d=a.getAttribute("text"),e=document.createElement("div");c&&e.setAttribute("title",c);u(a.getParent(),y(a))&&e.classList.add("adfmf-filmStripItem-selected");c=document.createElement("div");c.id=b+"_content";if(!1!==a.getAttribute("_visible"))for(var g=a.renderDescendants(),
h=0;h<g.length;++h)c.appendChild(g[h]);e.appendChild(c);c.className="amx-filmStrip-item-content";d&&(c=document.createElement("div"),c.id=b+"_text",c.className="amx-filmStrip-item-text",c.textContent=d,e.appendChild(c));adf.mf.api.amx.addBubbleEventListener(e,"tap",this._handleTap,{elementId:b,itemAmxNode:a});return e};m.prototype.refresh=function(a,b){m.superclass.refresh.call(this,a,b);var c=a.getId(),d=document.getElementById(c);if(b.hasChanged("_visible")&&!1!==a.getAttribute("_visible"))for(var e=
document.getElementById(c+"_content"),g=a.renderDescendants(),h=0;h<g.length;++h)e.appendChild(g[h]);b.hasChanged("shortDesc")&&((e=a.getAttribute("shortDesc"))?d.setAttribute("title",e):d.removeAttribute("title"));b.hasChanged("text")&&(e=a.getAttribute("text"),(g=document.getElementById(c+"_text"))?e?textContent.textContent=e:adf.mf.api.amx.removeDomNode(g):e&&(g=document.createElement("div"),g.id=c+"_text",g.className="amx-filmStrip-item-text",g.textContent=e,d.appendChild(textContent)))};m.prototype.attributeChangeResult=
function(a,b,c){switch(b){case "_visible":if(!0===a.getAttribute("_visible"))a.createStampedChildren(null,null,null),a.setAttributeResolvedValue("_visible",null);else if(1===c.getSize())return adf.mf.api.amx.AmxNodeChangeResult.NONE;return adf.mf.api.amx.AmxNodeChangeResult.REFRESH;case "shortDesc":case "text":return adf.mf.api.amx.AmxNodeChangeResult.REFRESH}return m.superclass.attributeChangeResult.call(this,a,b,c)};var n=function(a,b){var c=a.getVolatileState();null==c&&(c={});c.selectedRowKeys||
(c.selectedRowKeys={});b=b.trim?b.trim():b;c.selectedRowKeys[b]=b;a.setVolatileState(c)},t=function(a,b){b=b.trim();var c=a.getVolatileState();null!=c&&c.selectedRowKeys&&(delete c.selectedRowKeys[b],a.setVolatileState(c))},u=function(a,b){var c=a.getVolatileState();return null!=c&&c.selectedRowKeys&&c.selectedRowKeys[b]?!0:!1},v=function(a){a=a.getVolatileState();var b=[];if(null!=a&&a.selectedRowKeys)for(var c in a.selectedRowKeys)b.push(c);return b},w=function(a){var b=a.getVolatileState();null!=
b&&(delete b.selectedRowKeys,a.setVolatileState(b))};m.prototype._handleTap=function(a){a.stopPropagation();var b=document.getElementById(a.data.elementId),c=a.data.itemAmxNode;a=c.getParent();adf.mf.api.amx.validate(b,function(){if(adf.mf.api.amx.acceptEvent()){var a=new adf.mf.api.amx.ActionEvent;adf.mf.api.amx.processAmxEvent(c,"action",void 0,void 0,a,null)}});if(adf.mf.api.amx.acceptEvent()){var d=a.getAttribute("selection");if("single"===d||"multiple"===d){var e=y(c),g=v(a),h=u(a,e);if("single"===
d){if(d=document.getElementById(a.getId()).querySelectorAll(".adfmf-filmStripItem-selected"))for(var k=0;k<d.length;k++)d[k].classList.remove("adfmf-filmStripItem-selected");w(a)}else!0===h&&(b.classList.remove("adfmf-filmStripItem-selected"),t(a,e));!1===h&&(b.classList.add("adfmf-filmStripItem-selected"),n(a,e));b=v(a);b=new adf.mf.api.amx.SelectionEvent(g,b);adf.mf.api.amx.processAmxEvent(a,"selection",void 0,void 0,b)}}};var x=function(a,b,c,d){this[".type"]="oracle.adfmf.amx.event.FilmStripPageChangeEvent";
this.displayedPageIndex=a;this.pageCount=b;this.displayedItemsPerPage=d;this.itemsPerPage=c},z=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"filmStrip");z.prototype.createChildrenNodes=function(a){var b=null;a.getAttribute("var")&&a.isAttributeDefined("value")&&(b=a.getAttribute("value"));if(void 0===b)return a.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),!0;if(b){var c=adf.mf.api.amx.createIterator(b);c.getTotalCount()>c.getAvailableCount()&&(adf.mf.api.amx.showLoadingIndicator(),
adf.mf.api.amx.bulkLoadProviders(b,0,-1,function(){try{var b=new adf.mf.api.amx.AmxNodeUpdateArguments;b.setAffectedAttribute(a,"value");adf.mf.api.amx.markNodeForUpdate(b)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"amx:filmStrip.createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR");adf.mf.log.Framework.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.Framework.logp(adf.mf.log.level.FINE,"amx:filmStrip","createChildrenNodes",
"Request: "+a+" response: "+b);adf.mf.api.amx.hideLoadingIndicator()}));for(;c.hasNext();)c.next(),A(a,c.getRowKey())}else A(a,null);a.createStampedChildren(null,["pageControl"]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return!0};var y=function(a){var b=a.getStampKey();null==b&&(b=a.getAttribute("_virtualStamp"));return b||null},A=function(a,b){var c=a.createStampedChildren(b,null,null);adf.mf.environment.profile.dtMode||c.forEach(function(a,c){a.setAttributeResolvedValue("_visible",
!1);null==b&&a.setAttributeResolvedValue("_virtualStamp",a.getAttributeExpression("id",!0)||""+c)});return c};z.prototype.visitChildren=function(a,b,c){if(a.visitStampedChildren(null,["pageControl"],null,b,c))return!0;var d=a.getAttribute("value"),e=a.getAttribute("var"),g=d?adf.mf.api.amx.createIterator(d):null;if(!b.isVisitAll()){a=b.getChildrenToWalk(a);for(var h=0;h<a.length;h++){var k=!1,m=a[h].getStampKey();if(g&&null!=m){if(!g.setCurrentRowKey(m))continue;k=null;k=g.isTreeNodeIterator()?d.localFetch(d.getCurrentIndex()):
g.getCurrent();if(!k)continue;adf.mf.el.pushVariable(e,k);k=!0}try{if(a[h].visit(b,c))return!0}finally{k&&adf.mf.el.popVariable(e)}}return!1}if(g){for(;g.hasNext();){d=g.next();adf.mf.el.pushVariable(e,d);try{if(a.visitStampedChildren(g.getRowKey(),[null],null,b,c))return!0}finally{adf.mf.el.popVariable(e)}}return!1}return a.visitStampedChildren(null,[null],null,b,c)};z.prototype.attributeChangeResult=function(a,b,c){a.setAttributeResolvedValue("_pageChangeCause",null);switch(b){case "value":return this._updateCollectionModel(a,
c);case "displayedItemKey":case "displayedPageIndex":return a.setAttributeResolvedValue("_pageChangeCause",b),adf.mf.api.amx.AmxNodeChangeResult.REFRESH;case "halign":case "itemSizing":case "itemsPerPage":case "orientation":case "pageControlPosition":case "shortDesc":case "valign":return adf.mf.api.amx.AmxNodeChangeResult.REFRESH}return z.superclass.attributeChangeResult.call(this,a,b,c)};z.prototype.getDescendentChangeAction=function(a,b){b.getAffectedNodes().forEach(function(a){!1===a.getAttribute("rendered")&&
a.setAttributeResolvedValue("_visible",!1)});return adf.mf.api.amx.AmxNodeChangeResult.RERENDER};z.prototype._updateCollectionModel=function(a,b){var c=a.getAttribute("value"),d=b.getCollectionChange("value");if(!c||!d||!d.isItemized())return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;var e=adf.mf.api.amx.createIterator(c);if(e.getTotalCount()>e.getAvailableCount())return adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(c,0,-1,function(){try{var b=new adf.mf.api.amx.AmxNodeUpdateArguments;
b.setAffectedAttribute(a,"value");b.setCollectionChanges(a.getId(),"value",d);adf.mf.api.amx.markNodeForUpdate(b)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"amx:filmStrip.createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR");adf.mf.log.Framework.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.Framework.logp(adf.mf.log.level.FINE,"amx:filmStrip","createChildrenNodes","Request: "+a+" response: "+b);adf.mf.api.amx.hideLoadingIndicator()}),
b.setCustomValue("bulkLoad",!0),adf.mf.api.amx.AmxNodeChangeResult.NONE;var g=!1,h={deleted:[],replaced:[],created:[]};d.getDeletedKeys().forEach(function(b){b=a.removeChildrenByKey(b);h.deleted=h.deleted.concat(b)});d.getCreatedKeys().forEach(function(b){g=!0;b=A(a,b);h.created=h.created.concat(b)});c=d.getUpdatedKeys();c=c.concat(d.getDirtiedKeys());c.forEach(function(b){g=!0;a.removeChildrenByKey(b);b=a.createStampedChildren(b,null,null);b.forEach(function(a){a.setAttributeResolvedValue("_visible",
!0)});h.replaced=h.replaced.concat(b)});if(g)b.setCustomValue("amxNodeCollectionChanges",h);else return adf.mf.api.amx.AmxNodeChangeResult.NONE;return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};z.prototype._createHandlers=function(b,c){var d=this.getPageCount(b),e={origin:null,startTime:null,vertical:"vertical"===b.getAttribute("orientation"),pageCount:d},g=this;adf.mf.api.amx.addBubbleEventListener(c,a.start,function(a){var c;a.touches&&0<a.touches.length?(c=a.touches[0].pageX,a=a.touches[0].pageY):
(c=a.pageX,a=a.pageY);e.origin={x:c,y:a};B(this.childNodes,!1);e.baseSize=e.vertical?this.childNodes[0].offsetHeight:this.childNodes[0].offsetWidth;e.activePageIndex=g.getCurrentPageIndex(b)});adf.mf.api.amx.addBubbleEventListener(c,a.end,function(a){B(this.childNodes,!0)});adf.mf.api.amx.addDragListener(c,{threshold:0,start:function(a,b){a.stopPropagation();a.preventDefault();b.preventDefault=!0;b.stopPropagation=!0;b.requestDragLock(this,!0,!0);var c=a.data.context;c.startTime=Date.now();c.swipeFound=
0;c.lastChange=null;c.swipeStart=null},drag:function(a,b){a.stopPropagation();a.preventDefault();b.stopPropagation=!0;var c=a.data.context;C(c,b,40)&&(b.preventDefault=!0);var d=Math.abs(c.vertical?b.deltaPageY:b.deltaPageX);c.delta&&(c.delta<d/2?(c.swipeFound=!0,c.swipeStart=Date.now()):c.swipeFound&&200<Date.now()-c.swipeStart&&(c.swipeFound=!1,c.swipeStart=null));c.delta=d;var d=0,e=a.data.amxNode,g=D(e,c,b);c.lastChange=g;var h=c.activePageIndex,k=c.pageCount;if(0===h&&0<g||k-1===h&&0>g)d=.7*
g;K(e,this.childNodes,c.vertical,Math.floor(100*(-100*h+g-d))/100)},end:function(a,b){a.stopPropagation();a.preventDefault();a.stopPropagation();a.preventDefault();var c=a.data.context,d=Date.now()-c.startTime,e=a.data.amxNode;B(this.childNodes,!0);var g=c.lastChange;g||(g=D(e,c,b));if(0!==g){var h=a.data.renderer,k=c.activePageIndex,m=0;if(!0===c.swipeFound||200<d&&50<Math.abs(g)||200>=d&&10<Math.abs(g)&&C(c,b,40))m=-1*(g/Math.abs(g));h.setCurrentPageByIndex(e,k+m)}}},{amxNode:b,context:e,renderer:this});
adf.mf.api.amx.addBubbleEventListener(c,"tap",this._handleTap,{amxNode:b});c=null};var D=function(a,b,c){return b.origin?(c=b.vertical?c.pageY-b.origin.y:c.pageX-b.origin.x,I(a)&&(c*=-1),c/b.baseSize*100):0},C=function(a,b,c){return a.vertical?Math.abs(Math.abs(b.originalAngle)-90)<c:Math.abs(Math.abs(Math.abs(b.originalAngle)-90)-90)<c};z.prototype._handleTap=function(a){if(adf.mf.api.amx.acceptEvent()){a=a.data.amxNode;var b=a.getAttribute("selection");if("single"===b||"multiple"===b){var b=v(a),
c=document.getElementById(a.getId()).querySelectorAll(".adfmf-filmStripItem-selected");if(c)for(var d=0;d<c.length;d++)c[d].classList.remove("adfmf-filmStripItem-selected");w(a);b=new adf.mf.api.amx.SelectionEvent(b,[]);adf.mf.api.amx.processAmxEvent(a,"selection",void 0,void 0,b)}}};var B=function(a,b){var c="amx-filmStrip_page";!0===b&&(c+=" animation");for(var d=0,e=a.length;d<e;d++)a[d].className!==c&&(a[d].className=c)},I=function(a){return"vertical"===a.getAttribute("orientation")?!1:"rtl"==
document.documentElement.dir},K=function(a,b,c,d){I(a)&&(d*=-1);d+="%";var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(e){var g=a.getAttribute("_rafid");if(g){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame;h&&(h(g),g=null)}g=e(function(e){L(b,c,d);b=null;a.setAttributeResolvedValue("_rafid",null)});a.setAttributeResolvedValue("_rafid",g)}else L(b,c,d),b=null},L=function(a,b,c){b=b?"translateY":"translateX";for(var d=0,e=a.length;d<e;d++)void 0!==a[d].style.transform?
a[d].style.transform=b+"("+c+")":a[d].style.WebkitTransform=b+"("+c+")"};z.prototype.setPageCount=function(a,b){var c=a.getVolatileState();null==c&&(c={});c._pageCount=b;a.setVolatileState(c)};z.prototype.getPageCount=function(a){a=a.getVolatileState();return null!=a&&a._pageCount?a._pageCount:0};z.prototype.getCurrentPageIndex=function(a){return(a=F(a))?a:0};z.prototype.setCurrentPageByIndex=function(a,b,c){var d=this.getPageCount(a);b?(b=Math.max(b,0),b=Math.min(b,d-1)):b=0;var e=b,g=a.getClientState();
null==g&&(g={});g._selectedPage=e;a.setClientState(g);e=a.getId();this._refreshPageControl(a);g=a.getAttribute("orientation");if(e=document.getElementById(e+"_pageContainer")){null!=c&&B(e.childNodes,c);K(a,e.childNodes,"vertical"===g,-100*b);c=null;for(var g=Math.max(b-1,0),h=Math.min(b+1,d-1);g<=h;g++){var k=e.childNodes[g];if(k)for(k=k.childNodes,i=0;i<k.length;i++){var m=adf.mf.internal.amx._getNonPrimitiveElementData(k[i],"amxNode");m&&!1===m.getAttribute("_visible")&&(null===c&&(c=new adf.mf.api.amx.AmxNodeUpdateArguments),
m.setAttributeResolvedValue("_visible",!0),c.setAffectedAttribute(m,"_visible"))}}null!==c&&adf.mf.api.amx.markNodeForUpdate(c);if(a.getAttribute("__currentPage")!==b&&(a.setAttributeResolvedValue("__currentPage",b),adf.mf.api.amx.acceptEvent())){c=0;if(e.childNodes[b]&&e.childNodes[b].firstElementChild)for(e=e.childNodes[b].firstElementChild;e;)e.classList.contains("amx-empty")||c++,e=e.nextElementSibling;b=new x(b,d,a.getAttribute("__itemsPerPage"),c);adf.mf.api.amx.processAmxEvent(a,"pageChange",
void 0,void 0,b,null)}}};z.prototype._renderPageControl=function(a,b){var c=a.getAttribute("orientation"),d=a.getAttribute("pageControlPosition"),e=a.getId(),h=document.getElementById(e+"_pageControl");h&&adf.mf.api.amx.removeDomNode(h);var k=a.getChildren("pageControl"),m=k.length,k=a.getRenderedChildren("pageControl");if("none"!==d&&(0===m||0<k.length)){c="vertical"!==c?"horizontal":"vertical";m=c+"_"+d;h||(h=document.createElement("div"),h.id=e+"_pageControl");switch(m){case "vertical_start":case "vertical_insideStart":case "horizontal_top":case "horizontal_insideTop":b.insertBefore(h,
b.firstElementChild);break;case "vertical_end":case "vertical_insideEnd":case "horizontal_bottom":case "horizontal_insideBottom":b.appendChild(h);break;default:d="vertical"===c?"end":"bottom",b.appendChild(h)}h.className="amx-filmStrip_pageControl position-"+d;if(0<k.length)k.forEach(function(a){a&&a.render&&h.appendChild(a.render())});else{var n=this,c={vertical:"vertical"===c,pageCount:n.getPageCount(a),currentIndex:n.getCurrentPageIndex(a),on:{pagechange:function(b){n.setCurrentPageByIndex(a,b,
!0)}}};g(h,a,c)}}else h=null;return h};var H=function(a,b){var c=new adf.mf.api.amx.AmxNodeUpdateArguments,d=!0;b.forEach(function(a){var b=a.getTypeHandler();adf.mf.internal.amx.implementsFunction(b,"__getRefreshProperty")&&(d=!0,c.setAffectedAttribute(a,b.__getRefreshProperty()))});d&&adf.mf.api.amx.markNodeForUpdate(c)};z.prototype._refreshPageControl=function(a,b){var c=a.getId(),d=document.getElementById(c+"_pageControl");if(b&&(b.hasChanged("pageControlPosition")||b.hasChanged("orientation")))a.setAttributeResolvedValue("_currentPosition",
null),this._renderPageControl(a,document.getElementById(c));else if((c=a.getChildren("pageControl"))&&0<c.length)c=a.getRenderedChildren("pageControl"),H(a,c);else{var e=this,c={vertical:"vertical"===a.getAttribute("orientation"),pageCount:e.getPageCount(a),currentIndex:e.getCurrentPageIndex(a),on:{pagechange:function(b){e.setCurrentPageByIndex(a,b,!0)}}};g(d,a,c)}};z.prototype.render=function(a,b){var c=a.getAttribute("orientation"),d=a.getAttribute("itemSizing"),e=a.getAttribute("valign"),g=a.getAttribute("halign"),
h=a.getAttribute("shortDesc");w(a);var k=a.getAttribute("selection");if("single"===k||"multiple"===k)if(k=a.getAttribute("selectedRowKeys"))for("string"===typeof k?k=-1<k.indexOf(",")?k.split(","):-1<k.indexOf(" ")?k.split(" "):[k]:"number"===typeof k&&(k=[k]),k=adf.mf.api.amx.createIterator(k);k.hasNext();)n(a,k.next());k=document.createElement("div");h&&(k.title=h);"stretched"===d&&k.classList.add("amx-filmStrip-stretchItems");"vertical"===c&&k.classList.add("vertical");e&&k.classList.add("valign-"+
e);g&&k.classList.add("halign-"+g);c=document.createElement("div");k.appendChild(c);d=document.createElement("div");d.id=a.getId()+"_pageContainer";d.className="amx-filmStrip_page-container";c.appendChild(d);this._createHandlers(a,d);c=document.createElement("div");c.className="amx-filmStrip_page";d.appendChild(c);if(d=a.getAttribute("value"))for(e=adf.mf.api.amx.createIterator(d);e.hasNext();)for(e.next(),g=a.renderDescendants(null,e.getRowKey()),d=0;d<g.length;d++)c.appendChild(g[d]);else for(e=
a.renderDescendants(),d=0;d<e.length;d++)c.appendChild(e[d]);this._renderPageControl(a,k);return k};z.prototype.destroy=function(a,b){var c=a.classList.contains("amx-filmStrip-stretchItems"),d=this._isFlexBoxDeprecatedImplementation();c&&!d||this._unregisterResizeHandler(b)};z.prototype._registerResizeHandler=function(a){if(this._resizeObservers)this._resizeObservers.push(a);else{var b=this;this._batchResizeHandler=function(a){b._resizeObservers.forEach(function(a){b.__redistributeItems(a)})};this._resizeObservers=
[a];window.addEventListener("resize",this._batchResizeHandler,!0)}};z.prototype._unregisterResizeHandler=function(a){if(this._resizeObservers){var b=[];this._resizeObservers.forEach(function(c){c!==a&&b.push(c)});0<b?this._resizeObservers=b:this._batchResizeHandler&&(delete this._resizeObservers,window.removeEventListener("resize",this._batchResizeHandler,!0),delete this._batchResizeHandler)}};var G=function(a){a.data.renderer.__redistributeItems(a.data.amxNode)};z.prototype.init=function(a,b){b.setAttributeResolvedValue("_pageChangeCause",
null);adf.mf.api.amx.addBubbleEventListener(a,"resize",G,{amxNode:b,renderer:this});var c=a.classList.contains("amx-filmStrip-stretchItems"),d=this._isFlexBoxDeprecatedImplementation();c&&!d||this._registerResizeHandler(b)};z.prototype.__calculateItemsPerPage=function(a){var b=a.getId(),c=document.getElementById(b),d=a.getAttribute("orientation"),b=document.getElementById(b+"_pageContainer"),e=b.firstElementChild,g=c.classList.contains("amx-filmStrip-stretchItems"),h=null,k=null;a.isAttributeDefined("itemsPerPage")&&
(h=a.getAttribute("itemsPerPage"));!g&&(a=window.getComputedStyle(e.childNodes[0]),"vertical"===d?(maxSize=c.clientHeight,size=e.childNodes[0].offsetHeight+parseFloat(a.marginTop)+parseFloat(a.marginBottom)):(maxSize=b.parentNode.clientWidth,size=e.childNodes[0].offsetWidth+parseFloat(a.marginLeft)+parseFloat(a.marginRight)),size=Math.min(size,maxSize),k=Math.floor(maxSize/size),isNaN(k)||!1===isFinite(k))&&(k=1);h&&k?k=Math.min(k,h):h?k=h:k||(k=1);return k};z.prototype.__redistributeItems=function(a,
b){var c=this.__calculateItemsPerPage(a);a.setAttributeResolvedValue("__itemsPerPage",c);var d=document.getElementById(a.getId()+"_pageContainer"),e=null;b||(e=this.getCurrentPageIndex(a),e=d.childNodes[e].firstChild.id);for(var g=d.firstElementChild;g;){var h=g.nextElementSibling;if(g.childElementCount>c)for(var k=g.childElementCount-1;k>=c;k--){var m=g.childNodes[k];m.classList.contains("amx-empty")?adf.mf.api.amx.removeDomNode(m):(h||(h=document.createElement("div"),h.className="amx-filmStrip_page",
d.appendChild(h)),h.firstElementChild?h.insertBefore(m,h.firstElementChild):h.appendChild(m))}else if(g.childElementCount<c&&h)for(var n=c-g.childElementCount,k=0;k<n&&(m=h.firstElementChild,m.classList.contains("amx-empty")?adf.mf.api.amx.removeDomNode(m):g.appendChild(m),0!==h.childNodes.length||(m=h,h=h.nextElementSibling,adf.mf.api.amx.removeDomNode(m),h));k++);g=h}g=d.lastElementChild;for(d=g.childNodes.length;d<c;d++)emptyItem=document.createElement("div"),emptyItem.className="amx-filmStripItem amx-empty",
g.appendChild(emptyItem);this.__recalculatePageCount(a,b);this.__recalculateInitialPage(a,e,b)};z.prototype.__recalculateInitialPage=function(a,b,c){var d=0,e=!1,g=a.getAttribute("_pageChangeCause");if(!g||"displayedPageIndex"===g){var h=a.getAttribute("displayedPageIndex");c&&null!=h&&(d=parseInt(h),e=!0)}if(!g||"displayedItemKey"===g){var k=a.getAttribute("displayedItemKey");!e&&c&&null!=k&&a.visitChildren(new adf.mf.api.amx.VisitContext,function(a,b){if(b.isReadyToRender()&&y(b)===k){var c=document.getElementById(b.getId()).parentNode;
if(c){for(;c.previousSibling;)d++,c=c.previousSibling;e=!0;return adf.mf.api.amx.VisitResult.COMPLETE}}return adf.mf.api.amx.VisitResult.REJECT})}if(!e&&c||b)for(var m=document.getElementById(a.getId()+"_pageContainer"),g=document.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,{acceptNode:function(a){return a===m||a.parentNode===m?NodeFilter.FILTER_SKIP:a.classList.contains("amx-filmStripItem")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});g.nextNode();)if(h=g.currentNode,b&&h.id===b||!b&&h.classList.contains("adfmf-filmStripItem-selected")){if(b=
h.parentNode)for(;b.previousSibling;)d++,b=b.previousSibling;e=!0;break}!e&&c&&(d=F(a),null==d&&(d=0));this.setCurrentPageByIndex(a,d)};z.prototype.__recalculatePageCount=function(a,b){var c=this._isFlexBoxDeprecatedImplementation();b=b||c;var d=this.getPageCount(a),e=a.getId(),e=document.getElementById(e+"_pageContainer"),g=e.childElementCount;if(b||d!==g)"vertical"===a.getAttribute("orientation")?(c=c?g*e.parentNode.offsetHeight+"px":100*g+"%",e.style.width="",e.style["min-width"]="",e.style.height=
c,e.style["min-height"]=c):(c=c?g*e.parentNode.offsetWidth+"px":100*g+"%",e.style.height="",e.style["min-height"]="",e.style.width=c,e.style["min-width"]=c);this.setPageCount(a,g)};z.prototype.postDisplay=function(a,b){var c=document.getElementById(b.getId()+"_pageContainer");if(c)var d=c.firstElementChild;d&&(d.className="amx-filmStrip_page",d.childNodes&&0!==d.childNodes.length&&this.__redistributeItems(b,!0))};z.prototype._isFlexBoxDeprecatedImplementation=function(){if(null==this._deprecated)if("undefined"!==
typeof CSS&&CSS.supports("(display: flex) or (display: -webkit-flex) or (display: -ms-flex)"))this._deprecated=!1;else{var a=document.createElement("div");a.style.display="-ms-flex";a.style.display="-webkit-flex";a.style.display="flex";document.body.appendChild(a);this._deprecated="-ms-flex"!==a.style.display&&"-webkit-flex"!==a.style.display&&"flex"!==a.style.display;document.body.removeChild(a)}return this._deprecated};var F=function(a){a=a.getClientState();return null==a||null==a._selectedPage?
null:a._selectedPage};z.prototype.refresh=function(a,b,c){z.superclass.refresh.call(this,a,b);c=a.getId();var d=document.getElementById(c),e=b.hasChanged("inlineStyle")||b.hasChanged("styleClass")||b.hasChanged("itemsPerPage"),g=!1;b.hasChanged("orientation")&&("vertical"===a.getAttribute("orientation")?d.classList.add("vertical"):d.classList.remove("vertical"),g=e=!0);b.hasChanged("itemSizing")&&("stretched"===a.getAttribute("itemSizing")?d.classList.add("amx-filmStrip-stretchItems"):d.classList.remove("amx-filmStrip-stretchItems"),
e=!0);if(b.hasChanged("shortDesc")){var h=a.getAttribute("shortDesc");h?d.setAttribute("title",h):d.removeAttribute("title")}b.hasChanged("valign")&&E(d,"valign",b.getOldValue("valign"),a.getAttribute("valign"));b.hasChanged("halign")&&E(d,"halign",b.getOldValue("halign"),a.getAttribute("halign"));if(b.hasChanged("value")&&!0!==b.getCustomValue("bulkLoad")&&(d=b.getCustomValue("amxNodeCollectionChanges"))){d.deleted.forEach(function(a){a=document.getElementById(a.getId());adf.mf.api.amx.removeDomNode(a)});
d.replaced.forEach(function(a){!1!==a.getAttribute("rendered")?a.rerender():(a=document.getElementById(a.getId()),adf.mf.api.amx.removeDomNode(a))});var k=document.getElementById(c+"_pageContainer");d.created.forEach(function(a){!1!==a.getAttribute("rendered")&&(a=a.render(),k.lastElementChild.appendChild(a))});e=!0}e&&(this.__redistributeItems(a),g&&this.__recalculatePageCount(a,!0));e&&g||!b.hasChanged("displayedPageIndex")&&!b.hasChanged("displayedItemKey")||(k=document.getElementById(c+"_pageContainer"),
B(k.childNodes,!0),this.__recalculateInitialPage(a,null,!0));(b.hasChanged("pageControlPosition")||e||g)&&this._refreshPageControl(a,b)};var E=function(a,b,c,d){c&&a.classList.remove(b+"-"+c);d&&a.classList.add(b+"-"+d)}})();