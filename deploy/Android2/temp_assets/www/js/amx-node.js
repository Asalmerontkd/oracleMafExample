(function(){function b(a,b,c){this.Init(a,b,c)}function c(a,b){var d=!c.noProcessAttributes[a]&&b;return d=d&&-1===a.indexOf("Listener")}var a={};adf.mf.api.amx.AmxNode=b;adf.mf.api.AdfObject.createSubclass(adf.mf.api.amx.AmxNode,adf.mf.api.AdfObject,"adf.mf.api.amx.AmxNode");b.prototype.Init=function(a,c,d){b.superclass.Init.call(this);this._tag=c;this._parent=a;this._children={};this._facets={};this._attr={};this._modifiableEl={};this._key=void 0===d?null:d;this._state=adf.mf.api.amx.AmxNodeStates.INITIAL;
this._childrenCreated=!1;this._tagInstances=this._elAttributeMap=this._elDependencies=this._converter=this._converterTag=this._id=null;this._tagInstancesWaitingOnEl=0;this._tagInstanceIdsWaitingOnEl={};this._attributesWaitingOnEl=0;this._attributeNamesWaitingOnEl={};adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","Init","Created AMX node for tag "+c.getNsPrefixedName()+" and ID attribute "+c.getAttribute("id"));adf.mf.internal.amx._pageBusyTracker.increment()};
b.prototype.getId=function(){return this._id};b.prototype.getTag=function(){return this._tag};b.prototype.getTypeHandler=function(){return this.getTag().getTypeHandler()};b.prototype.getClientState=function(){var a=this.getId(),b=adf.mf.internal.amx._getClientStateMap();if(null==a)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_ASSOCIATING_CLIENT_STATE",a));if(null==b)adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINE,"adf.mf.api.amx.AmxNode",
"getClientState","State not able to be retrieved, client state map is not available for AmxNode "+a);else return b[a]};b.prototype.setClientState=function(a){var b=this.getId(),c=adf.mf.internal.amx._getClientStateMap();if(null==b)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_ASSOCIATING_CLIENT_STATE",b));null==c?adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINE,"adf.mf.api.amx.AmxNode","setClientState","State not being saved, client state map is not available for AmxNode "+
b):c[b]=a};b.prototype.getVolatileState=function(){var a=this.getId(),b=adf.mf.internal.amx._getVolatileStateMap();if(null==a)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_ASSOCIATING_VOLATILE_STATE",a));if(null==b)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_VOLATILE_STATE_NOT_AVAILABLE",b));return b[a]};b.prototype.setVolatileState=function(a){var b=this.getId(),c=adf.mf.internal.amx._getVolatileStateMap();if(null==b)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle",
"ERROR_ASSOCIATING_VOLATILE_STATE",b));if(null==c)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_VOLATILE_STATE_NOT_AVAILABLE",c));c[b]=a};b.prototype.getConverter=function(){return this._converter};b.prototype.setConverter=function(a){this._converter=a};b.prototype.storeModifyableEl=function(a){if(this.getTag().isAttributeElBound(a)){var b=this.getAttributeExpression(a,!1,!0),b=b.toContextFreeExpression();return this._modifiableEl[a]=b}return null};b.prototype.init=function(){var a=
adf.mf.internal.perf.startMonitorCall("Initialize AMX node",adf.mf.log.level.FINEST,null),b=this.getState(),c=this.getTag(),d=c.getAttributes(),e=null;try{this._createUniqueId();var t=c.getName()+":"+this.getId();a.setInstanceName(t);if(this._processAttribute("rendered"))this.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),this._registerRenderedAttributeForDataChange();else if(this.getAttribute("rendered")){for(e in d)"rendered"!=e&&"id"!=e&&this._processAttribute(e);this._processConverterTag();this.setState(0==
this._tagInstancesWaitingOnEl&&0==this._attributesWaitingOnEl?adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER:adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION);b=this.getState();if(b==adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION||b==adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER)this._createChildren(),b=this.getState(),(b==adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION||b==adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER)&&this._processConverter()&&this._convertValue();this._setupInputValueValidation();
this._elDependencies=new adf.mf.internal.amx.AmxElDependencies(this._getAttributesExpressionMap());this._postProcessForDataChangeNotification(!0)}else null!=this.getAttributeExpression("rendered")&&this._registerRenderedAttributeForDataChange(),this.setState(adf.mf.api.amx.AmxNodeStates.UNRENDERED)}finally{a.stop()}};b.prototype.getStampKey=function(){return this._key};b.prototype.getDefinedAttributeNames=function(){var a=[],b;for(b in this._attr)a.push(b);return a};b.prototype.getAttribute=function(a){return this._attr[a]};
b.prototype.getAttributeExpression=function(a,c,d){var e=this.getTag();if(!e.isAttributeElBound(a))return!0===c?e.getAttribute(a):null;if(null!=this._elAttributeMap&&(c=this._elAttributeMap[a],null!=c))return d?c:c.getExpression();e=e.getAttribute(a);c=adf.mf.internal.el.parser.parse(e);c=b.__performElSubstitutions(c);null!=c&&(null==this._elAttributeMap&&(this._elAttributeMap={}),this._elAttributeMap[a]=c);return d?c:c.getExpression()};b.prototype.setAttributeResolvedValue=function(a,b){this._attr[a]=
b};b.prototype.setAttribute=function(a,b){var c=this;return new adf.mf.internal.BasePromise(function(d,e){var t=c._modifiableEl[a];null==t&&c.getTag().isAttributeElBound(a)&&(t=c.getTag().getAttribute(a));c.setAttributeResolvedValue(a,b);if(null==t)d();else{var u=c.getAttribute(a),v={name:t,value:b};t.indexOf||(v.name=t.getExpression(),v.expression=t);amx.setElValue(v).then(function(){d()},function(){c.setAttributeResolvedValue(a,u)})}})};b.prototype.isAttributeDefined=function(a){return void 0!==
this._tag.getAttribute(a)};b.prototype.getParent=function(){return this._parent};b.prototype.addChild=function(a,b){var c=a.getStampKey(),d;if(null==b)d=this._children[c],null==d&&(this._children[c]=d=[]);else{var e=this._facets[c];null==e&&(e=this._facets[c]={});d=e[b];null==d&&(e[b]=d=[])}d.push(a)};b.prototype.removeChild=function(a){var b=a.getStampKey(),c=a.getId();a.getState();c=this._findChildIndexAndFacetName(b,c);if(null==c)return!1;a._removeFromDataChangeNotification(!0);a=c.facetName;var d=
null,c=c.index,d=null==a?this._children[b]:this._facets[b][a];d.splice(c,1);return!0};b.prototype.removeChildrenByKey=function(a){var b=[];a=this.getChildren(null,a).slice();for(var c=0,d=a.length;c<d;++c){var e=a[c];this.removeChild(e)&&b.push(e)}return b};b.prototype.replaceChild=function(a,b){var c=a.getStampKey(),d=a.getId(),d=this._findChildIndexAndFacetName(c,d);if(null==d)return!1;a._removeFromDataChangeNotification(!0);var e=d.facetName;null==e?this._children[c][d.index]=b:this._facets[c][e][d.index]=
b;return!0};b.prototype.getChildren=function(a,b){void 0===b&&(b=null);var c;if(null==a)c=this._children[b];else{c=this._facets[b];if(null==c)return[];c=c[a]}return null==c?[]:c};b.prototype.getFacets=function(a){void 0===a&&(a=null);a=this._facets[a];return null==a?{}:a};b.prototype.visit=function(a,b){var c=this.getTypeHandler();if(adf.mf.internal.amx.implementsFunction(c,"visit"))return c.visit(this,a,b);if(a.isVisitAll()||0<=a.getNodesToVisit().indexOf(this))switch(b(a,this)){case adf.mf.api.amx.VisitResult.ACCEPT:break;
case adf.mf.api.amx.VisitResult.REJECT:return!1;default:return!0}return this.visitChildren(a,b)};b.prototype.visitChildren=function(a,b){var c=this.getTypeHandler();return adf.mf.internal.amx.implementsFunction(c,"visitChildren")?c.visitChildren(this,a,b):this.visitStampedChildren(null,null,null,a,b)};b.prototype.visitStampedChildren=function(a,b,c,d,e){var t=d.isVisitAll(),u=d.getNodesToWalk();if(null==b){b=[];var v=this.getFacets(a),w;for(w in v)b.push(w);b.push(null)}w=0;for(v=b.length;w<v;++w)for(var x=
this.getChildren(b[w],a),z=0,y=x.length;z<y;++z){var A=x[z];if((t||0<=u.indexOf(A))&&(null==c||c(this,a,A))&&A.visit(d,e))return!0}return!1};b.prototype.getRenderedChildren=function(a,b){for(var c=[],d=this.getChildren(a,b),e=0,t=d.length;e<t;++e){var u=new adf.mf.api.amx.VisitContext;d[e].visit(u,function(a,b){if(!b.isReadyToRender())return adf.mf.api.amx.VisitResult.REJECT;if(b.isFlattenable()){var d=b.getTypeHandler();return adf.mf.internal.amx.implementsFunction(d,"__getRenderedChildren")?(d=
d.__getRenderedChildren(b),c.push.apply(c,d),adf.mf.api.amx.VisitResult.REJECT):adf.mf.api.amx.VisitResult.ACCEPT}c.push(b);return adf.mf.api.amx.VisitResult.REJECT})}return c};b.prototype.isFlattenable=function(){var a=this.getTypeHandler();return adf.mf.internal.amx.implementsFunction(a,"isFlattenable")&&a.isFlattenable(this)};b.prototype.getState=function(){return this._state};b.prototype.setState=function(a){adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,
"adf.mf.api.amx.AmxNode","setState","Setting state of AmxNode "+this.getId()+" to "+adf.mf.api.amx.AmxNodeStates.getLabelForValue(a));switch(a){case adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION:case adf.mf.api.amx.AmxNodeStates.INITIAL:case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:switch(this._state){case adf.mf.api.amx.AmxNodeStates.UNRENDERED:case adf.mf.api.amx.AmxNodeStates.RENDERED:case adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER:adf.mf.internal.amx._pageBusyTracker.increment()}break;
default:switch(this._state){case adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION:case adf.mf.api.amx.AmxNodeStates.INITIAL:case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:adf.mf.internal.amx._pageBusyTracker.decrement()}}this._state=a};b.prototype.renderNode=function(){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"renderNode","MSG_DEPRECATED","amxNode.renderNode","amxNode.render");return this.render()};b.prototype.render=function(){var a=null,b=this.getTag();if(b.isUITag()&&
!1!==this.getAttribute("rendered")){var c=this.getTypeHandler();if(adf.mf.internal.amx.implementsFunction(c,"render")){var d=this.getId();adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","renderNode","Rendering AmxNode "+d);a=c.render(this,d);try{a.setAttribute("id",d)}catch(e){return adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"renderNode","MSG_AMX_NODE_RENDER_FAILED",this.getTag().getNsPrefixedName()),
adf.mf.log.Framework.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.Framework.logp(adf.mf.log.level.FINE,"adf.mf.api.amx.AmxNode","render","Setting the ID attribute failed for tag "+this.getTag().getNsPrefixedName()+" with ID "+d+" error: "+e),null}try{adf.mf.internal.amx.implementsFunction(c,"init")&&amx.queueForInit(this);adf.mf.internal.amx.implementsFunction(c,"postDisplay")&&amx.queueForPostDisplay(this);adf.mf.internal.amx._setNonPrimitiveElementData(a,"amxNode",this);a.classList.add("amx-node");
if(null==b._rootClassName){var t=b.getNamespace();b._rootClassName=t==adf.mf.api.amx.AmxTag.NAMESPACE_AMX?"amx-"+b.getName():t==adf.mf.api.amx.AmxTag.NAMESPACE_DVTM?"dvtm-"+b.getName():""}""!=b._rootClassName&&a.classList.add(b._rootClassName);var u=this.getAttribute("styleClass");if(null!=u&&""!=u){adf.mf.environment.profile.dtMode&&(u=u.replace(/#\{(.*?)\}/ig," "));for(var v=u.split(" "),b=0,w=v.length;b<w;++b){var x=v[b];""!=x&&a.classList.add(x)}}adf.mf.api.amx.isValueTrue(this.getAttribute("readOnly"))&&
a.classList.add("amx-readOnly");adf.mf.api.amx.isValueTrue(this.getAttribute("disabled"))&&a.classList.add("amx-disabled");"function"===typeof c.destroy&&a.classList.add("amx-has-destroy");"function"===typeof c.preDestroy&&a.classList.add("amx-has-predestroy");var z=this.getAttribute("inlineStyle");if(z){adf.mf.environment.profile.dtMode&&(z=z.replace(/#\{(.*?)\}/ig," "));var y=a.getAttribute("style");null==y?a.setAttribute("style",z):a.setAttribute("style",y+";"+z)}this._applyClientListenerAssociations(a)}catch(A){adf.mf.log.logInfoResource("AMXInfoBundle",
adf.mf.log.level.SEVERE,"adf.mf.api.amx.AmxNode.render","MSG_AMX_NODE_RENDER_FAILED",this.getTag().getNsPrefixedName()),adf.mf.log.Framework.isLoggable(adf.mf.log.level.FINE)&&adf.mf.log.Framework.logp(adf.mf.log.level.FINE,"adf.mf.api.amx.AmxNode","render","Error rendering tag "+this.getTag().getNsPrefixedName()+" with ID "+this.getId()+" error: "+A)}}else adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.WARNING,"render","MSG_NO_RENDERER",this.getTag().getNsPrefixedName())}this.getState()!=
adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED&&this.setState(adf.mf.api.amx.AmxNodeStates.RENDERED);return a};b.prototype._applyClientListenerAssociations=function(a){var b=this.getAttribute("data-clientListenerTypes");if(b){var c=this.getId(),d=this.getTypeHandler(),e;for(e in b)d.__experimentalCLAssociation(this,c,e,a)}};b.prototype.renderSubNodes=function(a,b){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"amxNode.renderSubNodes","MSG_DEPRECATED","amxNode.renderSubNodes",
"amxNode.renderDescendants");for(var c=this.renderDescendants(a,b),d=[],e=0,t=c.length;e<t;++e)d.push(c[e]);return d};b.prototype.renderDescendants=function(a,b){for(var c=[],d=this.getRenderedChildren(a,b),e=0,t=d.length;e<t;++e){var u=d[e].render();u&&c.push(u)}return c};b.prototype.rerenderNode=function(){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"amxNode.rerenderNode","MSG_DEPRECATED","amxNode.rerenderNode","amxNode.rerender");this.rerender()};b.prototype.rerender=function(){var a=
document.getElementById(this.getId());if(null==a)a=this.__getRenderingParent().__getClosestRenderedNode(),null!=a&&a.rerender();else{adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST)&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","rerenderNode","Re-rendering AmxNode "+this.getId());var b=this.render();b&&a.parentNode.insertBefore(b,a);adf.mf.api.amx.removeDomNode(a);!0===amx.mustProcessQueues&&(amx.processAndCleanInitQueue(),amx.processAndCleanPostDisplayQueue())}};b.prototype.isReadyToRender=
function(){switch(this.getState()){case adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER:case adf.mf.api.amx.AmxNodeStates.RENDERED:case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:return!0;default:return!1}};b.prototype.isRendered=function(){switch(this.getState()){case adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION:case adf.mf.api.amx.AmxNodeStates.RENDERED:case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:return null!=document.getElementById(this.getId());default:return!1}};b.prototype.refresh=
function(a,b){var c=this.getTypeHandler();adf.mf.internal.amx.implementsFunction(c,"refresh")&&c.refresh(this,a,b)};b.prototype.updateAttributes=function(a,b){var c=new adf.mf.api.amx.AmxAttributeChange,d=!1;if(a.rendered){var e=this.getAttribute("rendered");if(d=this._processAttribute("rendered"))return this.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),c.__addChangedAttribute("rendered",e),c;var t=this.getAttribute("rendered");if(e!=t){c.__addChangedAttribute("rendered",e,null);if(!t)return this._removeFromDataChangeNotification(!1),
this._facets={},this._children={},this._modifiableEl={},this._childrenCreated=!1,this._elDependencies=this._tagInstances=this._converter=null,this._tagInstanceIdsWaitingOnEl={},this._tagInstancesWaitingOnEl=0,this.setState(adf.mf.api.amx.AmxNodeStates.UNRENDERED),this._registerRenderedAttributeForDataChange(),c;this.setState(adf.mf.api.amx.AmxNodeStates.INITIAL);return c}}if(this.getState()==adf.mf.api.amx.AmxNodeStates.UNRENDERED)return c;for(var u in a)"rendered"!=u&&(e=this.getAttribute(u),d=this._processAttribute(u)||
d,c.__addChangedAttribute(u,e,null==b?null:b[u]));d&&this.isReadyToRender()?this.setState(adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION):0==this._tagInstancesWaitingOnEl&&0==this._attributesWaitingOnEl&&this.getState()==adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION&&this.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return c};b.prototype.updateChildren=function(a){if(this._childrenCreated){var b=this.getTypeHandler();return 0<a.getSize()?adf.mf.internal.amx.implementsFunction(b,
"updateChildren")?b.updateChildren(this,a):adf.mf.api.amx.AmxNodeChangeResult.RERENDER:adf.mf.api.amx.AmxNodeChangeResult.NONE}state=this.getState();(state==adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION||this.isReadyToRender())&&this._createChildren();return adf.mf.api.amx.AmxNodeChangeResult.RERENDER};b.prototype.createStampedChildren=function(a,b,c){var d=this.getTag(),e,t,u,v=[];if(null==b||0<b.length){var w=d.getChildrenFacetTags();t=0;for(u=w.length;t<u;++t){e=w[t].getFacet();var x=e.name;
if(!(null!=b&&0<b.length&&-1==b.indexOf(x)))for(var z=e.children,y=0,A=z.length;y<A;++y)e=z[y],e.isUITag()&&(null==c||c(this,a,e,x))&&(e=e.buildAmxNode(this,a),v.push(e),this.addChild(e,x))}}if(null==b||0<=b.indexOf(null))for(b=d.getChildrenUITags(),t=0,u=b.length;t<u;++t)if(d=b[t],null==c||c(this,a,d,null))e=d.buildAmxNode(this,a),v.push(e),this.addChild(e);return v};b.prototype.findAncestorByTag=function(a,b){for(var c=this.getParent();null!=c;c=c.getParent()){var d=c.getTag();if(d.getName()==b&&
d.getNamespace()==a)return c}return null};b.prototype.findRelativeAmxNode=function(a,b){for(var c=this._findNamingContainerAndStampKey(),d=a.split(":"),e=c.amxNode,t=e,u=0,v=d.length;u<v&&null!=t;++u)t=t._findAmxNode(d[0],0==u?c.stampKey:null);return null==t?(c=e.getTag(),e=e.getParent(),null==e||"fragment"==c.getName()&&c.getNamespace()==adf.mf.api.amx.AmxTag.NAMESPACE_AMX&&1!=b?null:e.findRelativeAmxNode(a,b)):t};b.prototype.__updateTagInstanceAttributes=function(a){var b=this.getId(),c=a.__getAffectedTagInstanceIds(b),
d=c.length;if(0<d){for(var e=this.getTypeHandler(),t=adf.mf.internal.amx.implementsFunction(e,"__tagInstanceUpdated"),u=0;u<d;++u){var v=c[u],w=a.__getAffectedAttributesForTagInstance(b,v);if(null!=this._tagInstances){var x=this._tagInstances[v];x&&(x.updateAttributes(w),this._tagInstanceIdsWaitingOnEl[v]&&x.getState()==adf.mf.internal.amx.AmxTagInstanceStates.LOADED&&(delete this._tagInstanceIdsWaitingOnEl[v],--this._tagInstancesWaitingOnEl),t&&e.__tagInstanceUpdated(this,x))}}0==this._tagInstancesWaitingOnEl&&
0==this._attributesWaitingOnEl&&this.getState()==adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION&&this.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER)}};b.prototype.__processConverterChanges=function(a,b){if(null!=this._converterTag){var c=this.getId(),d=this._converterTag.getAttribute("id"),d=0<=a.__getAffectedTagInstanceIds(c).indexOf(d),c=a.getAffectedAttributes(c).value,e=null!=this.getConverter();d||0==e?(this._converter=null,this._processConverter()&&void 0!==this.getTag().getAttribute("value")&&
(d=this.getAttribute("value"),e&&1!=c&&!adf.mf.environment.profile.dtMode&&(c=this.getAttributeExpression("value"),this.setAttributeResolvedValue("value",adf.mf.internal.amx.evaluateExpression(c))),this._convertValue(),b.__addChangedAttribute("value",d,null))):c&&this._convertValue()}};b.prototype.__getRenderingParent=function(){return null==this._renderingParent?this.getParent():this._renderingParent};b.prototype.__setRenderingParent=function(a){this._renderingParent=a};b.prototype.__pushElReplacements=
function(a){b._pushElReplacements(a)};b.prototype.__popElReplacements=function(){b._popElReplacements()};b.prototype.__getConverterTag=function(){return this._converterTag};b.prototype.__getClosestRenderedNode=function(a){var b=adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST),c=null;b&&(c=this.getId());for(var d=this;null!=d;d=d.__getRenderingParent()){var e=d.getState();switch(e){case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:case adf.mf.api.amx.AmxNodeStates.RENDERED:case adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER:if(!0!==
a&&e==adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER)continue;if(null!=document.getElementById(d.getId()))return b&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","__getClosestRenderedNode","Closest rendered ancestor node of node "+c+" was found to be "+d.getId()),d}}b&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","__getClosestRenderedNode","No rendered ancestor node could be found for node "+c);return null};b.prototype.__getDescendentChangeAction=function(a){var b=
this.getTypeHandler();if(adf.mf.internal.amx.implementsFunction(b,"getDescendentChangeAction"))return b.getDescendentChangeAction(this,a);for(var b=a.getAffectedNodes(),c=0,d=b.length;c<d;++c){var e=b[c],t=a.getPreviousNodeState(e),u=e.isReadyToRender(),e=(t==adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER||t==adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED||t==adf.mf.api.amx.AmxNodeStates.RENDERED)&&null!=document.getElementById(e.getId());if(0==u&&e||u&&0==e)return adf.mf.api.amx.AmxNodeChangeResult.RERENDER}return adf.mf.api.amx.AmxNodeChangeResult.NONE};
b.prototype.__getAttributesForElDependency=function(a){var b=null;return b=null!=this._elDependencies?this._elDependencies.getAttributesForElDependency(a):[]};b.prototype.__processTagInstancesForElDependency=function(a,b){for(var c=this.__getAllTagInstances(),d=0,e=c.length;d<e;++d)for(var t=c[d],u=t.getElDependencies().getAttributesForElDependency(b),v=0,w=u.length;v<w;++v)a.__setAffectedAttributeForTagInstance(t,u[v])};b.prototype.__getTagInstances=function(a,b){var c=[],d;for(d in this._tagInstances){var e=
this._tagInstances[d];if(null==e.getParentTagInstance()){var t=e.getTag();t.getName()==b&&t.getNamespace()==a&&c.push(e)}}return c};b.prototype.__getAllTagInstances=function(){var a=[],b;for(b in this._tagInstances)a.push(this._tagInstances[b]);return a};b.prototype.__findPopup=function(a){if(null==a)return null;var b=a.indexOf(":"),c;if(-1==b){for(b=this;null!=b;b=b.getParent())if(c=b.getTypeHandler(),adf.mf.internal.amx.implementsFunction(c,"findPopup"))return c.findPopup(b,a,!0);return null}c=
a.substring(0,b);c=this.findRelativeAmxNode(c,!1);if(null!=c&&(c=c.getChildren(),0<c.length)){var d=c[0];c=d.getTypeHandler();if(adf.mf.internal.amx.implementsFunction(c,"findPopup"))return c.findPopup(d,a.substring(b+1),!1)}return null};b.prototype.__getAttributeToValidate=function(){return this._attributeToValidate};b.prototype._findNamingContainerAndStampKey=function(){for(var a=this;;a=a.getParent()){var b=a.getStampKey();if(null!=b)return{amxNode:a.getParent(),stampKey:b};if(a._isNamingContainer()||
null==a.getParent())return{amxNode:a,stampKey:null}}};b.prototype._findAmxNode=function(a,b){var c=this.getChildren(null,b),d=this.getFacets(b),e;for(e in d)c=c.concat(d[e]);d=c.length;for(e=0;e<d;++e){var t=c[e];if(t.getTag().getAttribute("id")==a)return t}for(e=0;e<d;++e)if(t=c[e],!t._isNamingContainer()&&(t=t._findAmxNode(a,null),null!=t))return t;return null};b.prototype._registerRenderedAttributeForDataChange=function(){if(null==this._elDependencies){var a=this.getAttributeExpression("rendered",
!1,!0);this._elDependencies=new adf.mf.internal.amx.AmxElDependencies({rendered:a});this._postProcessForDataChangeNotification(!1)}};var e=adf.mf.internal.el.parser.parse("#{iterator}"),d=adf.mf.internal.el.parser.parse("#{null}");b.prototype._processAttribute=function(a){var b=!1,k=this.getTag();if(!k.isAttributeElBound(a)){if(void 0!==this.getAttribute(a))return b;var m=k.getAttribute(a);"rendered"==a&&(m=void 0===m||adf.mf.api.amx.isValueTrue(m));if(void 0==m)return b;this.setAttributeResolvedValue(a,
m);return b}var n=this.getAttributeExpression(a,!1,!0);if(adf.mf.environment.profile.dtMode)return this.setAttributeResolvedValue(a,"rendered"==a?!0:n.getExpression()),b;if(!c(a,n))return b;m=adf.mf.internal.amx.evaluateExpression(n);if(void 0===m)if(b=!0,this._attributeNamesWaitingOnEl[a]){if(k=this._checkForUnassignableEl(n),null!=k)throw this._elAttributeMap[a]=d,Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_UNASSIGNABLE_ATTRIBUTE",this.getId(),a,k));}else this._attributeNamesWaitingOnEl[a]=
!0,++this._attributesWaitingOnEl;else this._attributeNamesWaitingOnEl[a]&&(delete this._attributeNamesWaitingOnEl[a],--this._attributesWaitingOnEl),"rendered"==a?m=adf.mf.api.amx.isValueTrue(m):"value"!=a||null==k.getAttribute("var")||null==m||Array.isArray(m)||(k=n.concat(e),m=adf.mf.internal.amx.evaluateExpression(k),void 0===m&&(b=!0)),this.setAttributeResolvedValue(a,m);return b};b.prototype._checkForUnassignableEl=function(a){a=a.dependencies();for(var b=0,c=a.length;b<c;++b){var d=a[b];if(!adf.mf.internal.util.isAssignable(d))return d}return null};
b.prototype._createChildren=function(){if(!this._childrenCreated){this._childrenCreated=!0;this._createNonUITagInstances();var a=this.getTypeHandler();if(adf.mf.internal.amx.implementsFunction(a,"createChildrenNodes")){a=a.createChildrenNodes(this);if(this.getState()==adf.mf.api.amx.AmxNodeStates.INITIAL||a==adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.DEFERRED){this._childrenCreated=!1;return}if(a==adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.HANDLED)return}this.createStampedChildren(null,
null,null)}};b.prototype._processConverterTag=function(){for(var a=this.getTag().getChildren(adf.mf.api.amx.AmxTag.NAMESPACE_AMX),b=0,c=a.length;b<c;++b){var d=a[b],e=d.getName();if("convertNumber"==e||"convertDateTime"==e){this._converterTag=d;break}}};b.prototype._processConverter=function(){if(null!=this._converter||null==this._converterTag||1==adf.mf.environment.profile.dtMode)return!1;var a=this._converterTag,b=a.getName(),c=!1;this.isReadyToRender()&&(a=this._tagInstances[a.getAttribute("id")],
"convertNumber"==b&&amx.createNumberConverter?(c=this.isAttributeDefined("label")?this.getAttribute("label"):null,this.setConverter(amx.createNumberConverter(a,c)),c=!0):"convertDateTime"==b&&amx.createDateTimeConverter&&(c=this.isAttributeDefined("label")?this.getAttribute("label"):null,this.setConverter(amx.createDateTimeConverter(a,c)),c=!0),b=this.getTypeHandler(),adf.mf.internal.amx.implementsFunction(b,"__converterCreated")&&b.__converterCreated(this,this._converter));return c};b.prototype._convertValue=
function(){null!=this._converter&&this.setAttributeResolvedValue("value",this._converter.getAsString(this.getAttribute("value")))};b.prototype._isNamingContainer=function(){var a=this.getTag(),b=a.getNamespace(),a=a.getName();return("fragment"==a||"facetRef"==a)&&b==adf.mf.api.amx.AmxTag.NAMESPACE_AMX};b.prototype._createNonUITagInstances=function(a){if(null==a){if(null!=this._tagInstances)return;this._tagInstances={}}if(!adf.mf.environment.profile.dtMode){for(var b=(null==a?this.getTag():a.getTag()).getChildren(),
c=0,d=b.length;c<d;++c){var e=b[c];if(0==e.isUITag()&&("facet"!=e.getName()||e.getNamespace()!=adf.mf.api.amx.AmxTag.NAMESPACE_AMX)){var t=e.getAttribute("id"),e=new adf.mf.internal.amx.AmxTagInstance(this,a,e);this._tagInstances[t]=e;e.getState()==adf.mf.internal.amx.AmxTagInstanceStates.WAITING_ON_EL_EVALUATION&&(++this._tagInstancesWaitingOnEl,this._tagInstanceIdsWaitingOnEl[t]=!0);this._createNonUITagInstances(e)}}0<this._tagInstancesWaitingOnEl&&this.isReadyToRender()&&this.setState(adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION)}};
b.prototype._createUniqueId=function(){var a=this.getAttribute("id");void 0===a&&(a=this.getTag().getAttribute("id"),this.setAttributeResolvedValue("id",a));var b=this.__getRenderingParent();if(null==b)this._id=a;else{var c=b.getId(),d=this.getStampKey(),b=b._isNamingContainer();null==d||b?b?this._id=c+":"+a:(d=null==c?-1:c.lastIndexOf(":"),this._id=-1==d?a:c.substring(0,d+1)+a):(d=d.toString(),d=d.replace(/[^\w\.\-]/g,"._."),this._id=c+":"+d+":"+a)}};b.prototype._findChildIndex=function(a,b,c){a=
this.getChildren(c,a);c=0;for(var d=a.length;c<d;++c)if(a[c].getId()==b)return c;return-1};b.prototype._findChildIndexAndFacetName=function(a,b){var c=null,d=this._findChildIndex(a,b,null);if(-1==d){var e=this.getFacets(a),t;for(t in e)if(d=this._findChildIndex(a,b,t),0<=d){c=t;break}}return-1==d?null:{index:d,facetName:c}};b.prototype._postProcessForDataChangeNotification=function(b){var c=this._elDependencies.getElTokens();if(b){b=this.__getAllTagInstances();for(var d=0,e=b.length;d<e;++d)c=c.concat(b[d].getElDependencies().getElTokens())}b=
0;for(d=c.length;b<d;++b){var e=c[b],n=a[e];null==n?(n=[this],a[e]=n):-1==n.indexOf(this)&&n.push(this)}this._registeredElTokens=c};b.prototype._removeFromDataChangeNotification=function(b){this._fireNotification(adf.mf.api.amx.AmxNodeNotifications[b?"PRE_REMOVAL":"UNRENDERED"]);if(b)switch(this.getState()){case adf.mf.api.amx.AmxNodeStates.INITIAL:case adf.mf.api.amx.AmxNodeStates.WAITING_ON_EL_EVALUATION:case adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED:adf.mf.internal.amx._pageBusyTracker.decrement()}b=
this._registeredElTokens;if(null!=b)for(var c=0,d=b.length;c<d;++c){var e=a[b[c]];if(null!=e){var n=e.indexOf(this);0<=n&&e.splice(n,1)}}this._registeredElTokens=null;this._removeChildrenFromDataChangeNotification()};b.prototype._removeChildrenFromDataChangeNotification=function(){var a,b,c,d=null;for(d in this._children)for(c=this._children[d],a=0,b=c.length;a<b;++a)c[a]._removeFromDataChangeNotification(!0);for(d in this._facets){var e=this._facets[d],t;for(t in e)for(c=e[t],a=0,b=c.length;a<b;++a)c[a]._removeFromDataChangeNotification(!0)}};
b.prototype._fireNotification=function(a){var b=this.getTypeHandler();adf.mf.internal.amx.implementsFunction(b,"handleNotification")&&b.handleNotification(this,a)};b.prototype._getAttributesExpressionMap=function(){var a=this.getTag().getAttributes(),b={},c;for(c in a)a=this.getAttributeExpression(c,!1,!0),null!=a&&(b[c]=a);return b};b.prototype._setupInputValueValidation=function(){var a=this.getTypeHandler();void 0===this._attributeToValidate&&(this._attributeToValidate=a=adf.mf.internal.amx.implementsFunction(a,
"getInputValueAttribute")?a.getInputValueAttribute():null,null!=a&&this.storeModifyableEl(a))};b.getAmxNodeForElement=function(a){for(;null!=a&&null!=a.classList;a=a.parentNode)if(a.classList.contains("amx-node"))return adf.mf.internal.amx._getNonPrimitiveElementData(a,"amxNode");return null};b.__performElSubstitutions=function(a){a.tokens||(a=adf.mf.internal.el.parser.parse(a));var c=adf.mf.log.AMX.isLoggable(adf.mf.log.level.FINEST),d=b._elReplacementsStack,e=a;try{a=adf.mf.internal.util.stripLocalValues(a,
!0,d)}catch(n){return amx.log.error(n.message),e}c&&adf.mf.log.AMX.logp(adf.mf.log.level.FINEST,"adf.mf.api.amx.AmxNode","__performElSubstitutions","Original expression: "+e+". Replacement: "+a);return a};b._pushElReplacements=function(a){var c=b._elReplacementsStack;null==c?b._elReplacementsStack=[a]:c.unshift(a)};b._popElReplacements=function(){var a=b._elReplacementsStack,c=a.shift();0==a.length&&delete b._elReplacementsStack;return c};b.__sortNodesByDepth=function(a){function b(a){for(var c=0;null!=
a;a=a.getParent())++c;return c}function c(a,d){if(a==d)return 0;var e=a.getParent(),g=d.getParent();if(e==g){var v=a.getStampKey(),w=d.getStampKey();return v==w?(e=e._findChildIndexAndFacetName(v,a.getId()),g=g._findChildIndexAndFacetName(w,d.getId()),w=e.facetName,v=g.facetName,w==v?0>e.index-g.index?-1:1:null==w?1:null==v?-1:w<v?-1:1):""+v<""+w?-1:1}var w=b(a),v=b(d),e=a,g=d,x=w,z=v;if(w!=v){for(;w>v;)e=e.getParent(),--w;for(;v>w;)g=g.getParent(),--v;if(e==g)return x<z?-1:1;if(e.getParent()==g.getParent())return c(e,
g)}for(;0<w;--w){v=e.getParent();x=g.getParent();if(v==x)return c(e,g);e=v;g=x}throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_FAILED_TO_SORT_AMX_NODES"));}a.sort(c)};b.__getNodesDependentOnElToken=function(b){b=b.getIndexedRepresentation();b=a[b];return null==b?[]:b};b.__clearBindings=function(){a={}};c.noProcessAttributes={valueChangeListener:!0,from:!0,to:!0,selectionChangeListener:!0,actionListener:!0,action:!0,binding:!0,rangeChangeListener:!0};adf.mf.internal.amx.acceptAttributeForElProcessing=
c})();