(function(){function b(){return"rtl"==document.documentElement.dir}function c(a){for(a=a.target;null!=a&&!a.classList.contains("amx-masonryLayoutItem")&&!a.classList.contains("amx-masonryLayout");a=a.parentNode)if(a.classList.contains("amx-commandLink")||a.classList.contains("amx-commandButton"))return!0;return!1}function a(a,c){var d=a.tile,e=a.ghost;b()?(d.style.right=e.style.right,d.style.left=""):d.style.left=e.style.left;d.style.top=e.style.top;d.style.zIndex=0;d.classList.add("amx-masonryLayoutItem");
d.classList.remove("amx-masonryLayoutItem-dragging");d._dragging=!1;adf.mf.api.amx.removeDomNode(e);a.insertBefore?d!=a.insertBefore&&h(c,d,a.insertBefore):(d.parentNode==c&&c.removeChild(d),c.appendChild(d));a.clear();for(var d=adf.mf.api.amx.MasonryReorderEvent,e=[],g=c.childNodes,k=1,m=g.length;k<m;k++)void 0!==g[k]._originalIndex&&e.push(g[k]._originalIndex);d=new d(e);e=adf.mf.api.amx.AmxNode.getAmxNodeForElement(c);adf.mf.api.amx.processAmxEvent(e,"reorder",void 0,void 0,d)}function e(a){return a.classList.contains("amx-masonryLayoutItem-size-1x1")?
"amx-masonryLayoutItem-size-1x1":a.classList.contains("amx-masonryLayoutItem-size-1x2")?"amx-masonryLayoutItem-size-1x2":a.classList.contains("amx-masonryLayoutItem-size-1x3")?"amx-masonryLayoutItem-size-1x3":a.classList.contains("amx-masonryLayoutItem-size-2x1")?"amx-masonryLayoutItem-size-2x1":a.classList.contains("amx-masonryLayoutItem-size-2x2")?"amx-masonryLayoutItem-size-2x2":a.classList.contains("amx-masonryLayoutItem-size-2x3")?"amx-masonryLayoutItem-size-2x3":a.classList.contains("amx-masonryLayoutItem-size-3x1")?
"amx-masonryLayoutItem-size-3x1":a.classList.contains("amx-masonryLayoutItem-size-3x2")?"amx-masonryLayoutItem-size-3x2":null}function d(){this.request=this.timeout=0;this.insertBefore=this.tile=this.ghost=null;this.startPageY=this.startPageX=this.startY=this.startX=0}function g(a){for(var b=a.getParent().getChildren(),c=!1,d=0;d<b.length;d++)if(c){var e=document.getElementById(b[d].getId());if(e)return e}else a==b[d]&&(c=!0);return null}function h(a,b,c){b!==c&&(a.removeChild(b),a.insertBefore(b,
c))}function k(a){if("1x1"!=a){if("1x2"==a)return"amx-masonryLayoutItem-size-1x2";if("1x3"==a)return"amx-masonryLayoutItem-size-1x3";if("2x1"==a)return"amx-masonryLayoutItem-size-2x1";if("2x2"==a)return"amx-masonryLayoutItem-size-2x2";if("2x3"==a)return"amx-masonryLayoutItem-size-2x3";if("3x1"==a)return"amx-masonryLayoutItem-size-3x1";if("3x2"==a)return"amx-masonryLayoutItem-size-3x2"}return"amx-masonryLayoutItem-size-1x1"}adf.mf.api.amx.MasonryReorderEvent=function(a){this.itemOrder=a;this[".type"]=
"oracle.adfmf.amx.event.MasonryReorderEvent"};var m=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"masonryLayout");m.prototype.Init=function(){m.superclass.Init.call(this)};m.prototype.createChildrenNodes=function(a){return!1};m.prototype.visitChildren=function(a,b,c){return a.visitStampedChildren(null,null,null,b,c)};var n=null,n=amx.hasTouch()?{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}:{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};
m.prototype.render=function(a){var c=document.createElement("div");this.initMLC(a,c);for(var e=[],g=a.renderDescendants(),h=0;h<g.length;h++){var k=g[h];k&&(k._originalIndex=h,e.push(k))}this._applyOrder(a,c,e);e={id:a.getId(),rtl:b(),dragContext:new d,amxNode:a};c.classList.contains("amx-masonryLayout-noDrag")||(this._addListener(c,"mousedown",this._createMouseDownCallback(),e),this._addListener(c,"mousemove",this._createMouseMoveCallback(),e),this._addListener(c,"mouseup",this._createMouseUpCallback(a),
e));return c};m.prototype.postDisplay=function(a,b){a._mlCommon&&a._mlCommon.setup(!0)};m.prototype.getDescendentChangeAction=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};m.prototype.updateChildren=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};m.prototype.refresh=function(a,b,c){this._refreshTiles(a,c);m.superclass.refresh.call(this,a,b,c)};m.prototype._refreshTiles=function(a,b){var c=a.getId(),d=document.getElementById(c);if(d._locked)d._refreshWhenUnlock=
!0;else{d._locked=!0;for(var e={},g=[],m=d.childNodes,n=0;n<m.length;n++)m[n].id&&(e[m[n].id]=m[n]);var t=a.getRenderedChildren(),B=this._getInitialOrder(a,t.length),m=[],I=0,K=[];if(b&&b.getAffectedNodes()){var n=b.getAffectedNodes()[0],L=b.getChanges(n);n&&L&&L.getCollectionChange("value")&&(K=L.getCollectionChange("value").getUpdatedKeys())}L=new adf.mf.api.amx.AmxNodeUpdateArguments;for(n=0;n<t.length;n++){var H=B?B[n]:n,G=t[H];-1<K.indexOf(H+"")&&L.setAffectedAttribute(G,"xx");var F=G.getId();
if(e[F])(H=e[F])&&delete e[F],h(d,H,d.children[I]),I++,F=k(G.getAttribute("dimension")),H.classList.contains(F)||(H=d._mlCommon,c=G.getId().replace(/:/g,"\\:"),H.resizeTile("#"+c,F));else if(G=G.render())g.push(G),m.push(I)}0<K.length&&adf.mf.api.amx.markNodeForUpdate(L);t=[];for(c in e)n=e[c],t.push(n);H=d._mlCommon;0<t.length&&(H._arInfoletsToHide=t,H._hidingInfolets=!0);if(0<g.length)for(H._arInfoletsToShow=g,H._showingInfolets=!0,n=0;n<g.length;n++)c=g[n],c.style.top="-1px",c.style.left="-1px",
c.classList.add("amx-masonryLayoutItem-transition-show-from"),H.insertTileDomElem(c,m[n]);H._queueRelayout()}};m.prototype.destroy=function(a,b){var c=b.getAttribute("resizeListener");window.removeEventListener("resize",c)};m.prototype.initMLC=function(c,d){d.classList.add("amx-masonryLayout");d.className+=" "+c.getAttribute("styleClass");var g=new window.adf.shared.impl.masonryLayout.MasonryLayoutCommon(d,b(),!1,{tiles:".amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x2, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x3, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x2, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x3, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-3x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-3x2"},
{transitionComponentResizeToStyleClass:"amx-masonryLayout-transition-resize-to",transitionComponentResizeToFastStyleClass:"amx-masonryLayout-transition-resize-to-fast",transitionMoveToStyleClass:"amx-masonryLayoutItem-transition-move-to",transitionMoveToFastStyleClass:"amx-masonryLayoutItem-transition-move-to-fast",transitionResizeToStyleClass:"amx-masonryLayoutItem-transition-resize-to",transitionHideFromStyleClass:"amx-masonryLayoutItem-transition-hide-from",transitionHideToStyleClass:"amx-masonryLayoutItem-transition-hide-to",
transitionShowFromStyleClass:"amx-masonryLayoutItem-transition-show-from",transitionShowToStyleClass:"amx-masonryLayoutItem-transition-show-to"},{addStyleClassName:function(a,b){null!=b&&""!=b&&a.classList.add.apply(a.classList,b.split(" "))},removeStyleClassName:function(a,b){null!=b&&""!=b&&a.classList.remove.apply(a.classList,b.split(" "))},getSizeStyleClassName:function(a){return e(a)},getTileSpan:function(a){return a.classList.contains("amx-masonryLayoutItem-size-1x1")?{colSpan:1,rowSpan:1}:
a.classList.contains("amx-masonryLayoutItem-size-1x2")?{colSpan:1,rowSpan:2}:a.classList.contains("amx-masonryLayoutItem-size-1x3")?{colSpan:1,rowSpan:3}:a.classList.contains("amx-masonryLayoutItem-size-2x1")?{colSpan:2,rowSpan:1}:a.classList.contains("amx-masonryLayoutItem-size-2x2")?{colSpan:2,rowSpan:2}:a.classList.contains("amx-masonryLayoutItem-size-2x3")?{colSpan:2,rowSpan:3}:a.classList.contains("amx-masonryLayoutItem-size-3x1")?{colSpan:3,rowSpan:1}:a.classList.contains("amx-masonryLayoutItem-size-3x2")?
{colSpan:3,rowSpan:2}:{colSpan:1,rowSpan:1}},showTileOnEndFunc:function(a){},hideTileOnEndFunc:function(a){adf.mf.api.amx.removeDomNode(a)},layoutOnEndFunc:function(){d.stopDragging=!1;var b=adf.mf.api.amx.AmxNode.getAmxNodeForElement(d),c=b.getAttribute("_pendingMove");c&&(b.setAttributeResolvedValue("_pendingMove",null),a(c,d))},layoutCycleOnStartFunc:function(){},layoutCycleOnEndFunc:function(){if(d._locked&&(d._locked=!1,d._refreshWhenUnlock)){var a=new adf.mf.api.amx.AmxNodeUpdateArguments;a.setAffectedAttribute(c,
"_refreshAfterUnlock");adf.mf.api.amx.markNodeForUpdate(a);d._refreshWhenUnlock=!1}a=d.getElementsByClassName("dvtm-component");window.removeEventListener("resize",h);for(var b=0;b<a.length;b++)adf.mf.api.amx.triggerBubbleEventListener(a[b],"resize");window.addEventListener("resize",h)}}),h=function(a){setTimeout(function(a){d._locked?d._refreshWhenUnlock=!0:(d._locked=!0,g.resizeNotify())},250,a)};c.setAttributeResolvedValue("resizeListener",h);window.addEventListener("resize",h);d._mlCommon=g};
m.prototype._addListener=function(a,b,c,d){var e=function(a){var b=n[a];return b?b:a};amx.hasTouch()?adf.mf.api.amx.addBubbleEventListener(a,e(b),function(a){if("touchend"===a.type)c(null,null,a);else if(1==a.touches.length){var b=a.touches[0];c(b.pageX,b.pageY,a)}},d):adf.mf.api.amx.addBubbleEventListener(a,e(b),function(a){c(a.pageX,a.pageY,a)},d)};m.prototype._createMouseDownCallback=function(){var a=this;return function(d,g,h){var k=a._getTile(h);adf.mf.api.amx.AmxNode.getAmxNodeForElement(k);
var m=document.getElementById(h.data.id);if(k){if(c(h))return!1;var n=h.data.dragContext;n.timeout=window.setTimeout(function(){n.timeout=0;b()?n.startX=parseInt(k.style.right,10):n.startX=k.offsetLeft;n.startY=k.offsetTop;n.startPageX=d;n.startPageY=g;n.tile=k;var a=document.createElement("div");a.classList.add("amx-masonryLayoutItem");a.classList.add(e(k));a.setAttribute("style","position: absolute; background-color: lightGray");b()?a.style.right=k.style.right:a.style.left=k.style.left;a.style.top=
k.style.top;a._ghost=!0;k.style.zIndex=300;k._dragging=!0;k.classList.remove("amx-masonryLayoutItem");k.classList.add("amx-masonryLayoutItem-dragging");m.insertBefore(a,k);n.ghost=a},125)}}};m.prototype._createMouseMoveCallback=function(){var a=this;return function(c,d,e){var g=e.data.dragContext,k=document.getElementById(e.data.id);if(g.timeout)window.clearTimeout(g.timeout),g.timeout=null;else{var m=g.tile;if(g.ghost){e.preventDefault();e=g.startX+c-g.startPageX;var n=g.startY+d-g.startPageY;m.style.left=
e+"px";b()&&(e=g.startX-(c-g.startPageX),m.style.right=e+"px",m.style.left="");m.style.top=n+"px";if(!k.stopDragging&&(e=adf.mf.internal.amx.getElementLeft(k),e=c-e,b()&&(e=k.getBoundingClientRect().right,e-=c),c=adf.mf.internal.amx.getElementTop(k),d=a._getTilePosition(m.parentNode,e,d-c),0<d)){if(d<k.childNodes.length){if(k.childNodes.item(d)._ghost)return;d=k.childNodes.item(d);h(k,g.ghost,d);g.insertBefore=d}else adf.mf.api.amx.removeDomNode(g.ghost),k.appendChild(g.ghost);k.stopDragging=!0;g.request&&
(window.cancelAnimationFrame(g.request),g.request=0);g.request=window.requestAnimationFrame(function(){k._locked?k._refreshWhenUnlock=!0:(k._locked=!0,k._mlCommon.setup(!1))})}}}}};m.prototype._createMouseUpCallback=function(b){return function(c,d,e){c=e.data.dragContext;d=document.getElementById(e.data.id);d.stopDragging?b.setAttributeResolvedValue("_pendingMove",c):c.timeout?(window.clearTimeout(c.timeout),c.timeout=0):c.ghost?(e.preventDefault(),a(c,d)):c.clear()}};m.prototype._getTile=function(a){for(a=
a.target;a;){if(a.classList.contains("amx-masonryLayoutItem"))return a;if(a.classList.contains("amx-masonryLayout"))break;a=a.parentNode}return null};m.prototype._getInitialOrder=function(a,b){var c=a.getAttribute("initialOrder");if(!c)return null;var d=[];"string"===typeof c&&(c=c.split(","));if(c.length)for(var e={},g=0;g<c.length;g++){var h=parseInt(c[g]);h<b&&!e[h]&&(d.push(h),e[h]=!0)}for(g=0;g<b;g++)-1==d.indexOf(g)&&d.push(g);return d};m.prototype._applyOrder=function(a,b,c){if(a=this._getInitialOrder(a,
c.length))for(d=0;d<a.length;d++)a[d]<c.length&&b.appendChild(c[a[d]]);else for(var d=0;d<c.length;d++)b.appendChild(c[d])};m._renderDescendants=function(a){a=a.getChildren();for(var b=0;b<a.length;b++){var c=a[b];null!=document.getElementById(c.getId())&&c.rerender()}};m.prototype._getTilePosition=function(a,c,d){a=a.childNodes;for(var e=1,g=a.length;e<g;e++){var h=a[e];if(!h._dragging&&!h._ghost)if(b()){var k=parseInt(h.style.right,10);if(c<k+h.offsetWidth&&c>k&&h.offsetTop<d&&d<h.offsetTop+h.offsetHeight)return c-
k>h.offsetWidth/2?e:e+1}else if(h.offsetLeft<c&&c<h.offsetLeft+h.offsetWidth&&h.offsetTop<d&&d<h.offsetTop+h.offsetHeight)return c>h.offsetLeft+h.offsetWidth/2?e:e+1}return-1};d.prototype.clear=function(){this.request=this.timeout=0;this.insertBefore=this.tile=this.ghost=null;this.startPageY=this.startPageX=this.startY=this.startX=0};var t=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"masonryLayoutItem");t.prototype.createChildrenNodes=function(a){a.createStampedChildren(null,
[null,"primary","secondary"]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.HANDLED};t.prototype.visitChildren=function(a,b,c){return a.visitStampedChildren(null,null,null,b,c)};t.prototype.render=function(a){var c=document.createElement("div"),d=k(a.getAttribute("dimension"));c.classList.add(d);var g=a.getChildren("primary");if(1>g.length)for(var g=a.getChildren(),h=0;h<g.length;h++){var m=g[h].render();m&&c.appendChild(m)}a=a.getId();
if(g=document.getElementById(a))b()?c.style.right=g.style.right:c.style.left=g.style.left,c.style.top=g.style.top,c.classList.remove(d),h=e(g),c.classList.add(h),h=g.parentNode,h._locked||(h._locked=!0,m=h._mlCommon,a=a.replace(/:/g,"\\:"),c.id=a,h.appendChild(c),h.removeChild(g),m.resizeTile("#"+a,d),h.removeChild(c),h.appendChild(g));return c};t.prototype.updateChildren=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};t.prototype.getDescendentChangeAction=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};
t.prototype.refresh=function(a,b,c){var d=document.getElementById(a.getId());a.getParent().getTypeHandler()._refreshTiles(a.getParent(),c);c&&c.getAffectedNodes().forEach(function(a){var b=document.getElementById(a.getAttribute("id"));a.getAttribute("rendered")&&!b?(b=a.render(),d.insertBefore(b,g(a))):!a.getAttribute("rendered")&&b&&d.removeChild(b)})}})();