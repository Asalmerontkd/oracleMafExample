(function(){function b(a){if(!amx.isValidating()){var b=document.getElementsByClassName("amx-validationGroup");if(0!=b.length){var c=function(b){if(void 0!==a&&null!=a&&0<a.length)for(var c=0;c<a.length;++c){var d=a[c];if(void 0!==b[d]&&(d=b[d],void 0!==d)){var e=d.invalid;for(item in e){var g=e[item],h;for(h in g){var k=g[h];adf.mf.api.amx.addMessage(k.name.toLowerCase(),k.value,null,null)}}d=d.required;for(item in d)adf.mf.api.amx.addMessage("error",d[item],null,null)}}};amx.buildValidationData(b).then(c,
c)}}}function c(a){a=adf.mf.internal.controller.ViewHistory.peek().viewId;void 0===I[a]&&(I[a]={});return I[a]}function a(a){c(a)[a]=!0}function e(a){return!0===c(a)[a]}function d(a,b,c,d){var e=b.__getAttributeToValidate();if(null!=e){var g=b.getAttributeExpression(e,!0);amx.containsELExpressions(g)&&(void 0===c.el[g]&&(c.el[g]=[]),0>c.el[g].indexOf(a)&&c.el[g].push(a));if(0!=adf.mf.api.amx.isValueTrue(b.getAttribute("required"))){e=b.getAttribute(e);if(Array.isArray(e)){if(0<e.length)return}else if(""!==
amx.getTextValue(e))return;0!=d&&(d=b.getTag().getNsPrefixedName(),d=adf.mf.resource.getInfoString("AMXInfoBundle",d==adf.mf.api.amx.AmxTag.NAMESPACE_AMX+":selectOneChoice"||d==adf.mf.api.amx.AmxTag.NAMESPACE_AMX+":selectManyChoice"?"MSG_MAKE_A_SELECTION":"MSG_ENTER_A_VALUE"),b=b.getAttribute("label"),null==b&&(b=""),void 0===c.required[a]&&(c.required[a]=[]),c.required[a].push(b+": "+d))}}}function g(a,b,c,e){return new adf.mf.internal.BasePromise(function(h,k){var m=b.childNodes;if(m&&0<m.length){for(var n=
[],t=0;t<m.length;++t){var u=m[t];if(1==u.nodeType&&u.classList.contains("amx-node")){var w=adf.mf.internal.amx._getNonPrimitiveElementData(u,"amxNode");if(void 0===w)continue;if(0==amx.isNodeRendered(w))continue;d(a,w,c,e)}u=g(a,u,c,e);n.push(u)}adf.mf.internal.BasePromise.all(n).then(function(){h()})}else h()})}function h(b,c){return new adf.mf.internal.BasePromise(function(d,h){for(var k=[],m={el:{},required:{}},n=0;n<b.length;++n){var t=b[n];null!=t.length&&(t=t[0]);var u,w=adf.mf.internal.amx._getNonPrimitiveElementData(t,
"amxNode").getId();1==c?(a(w),u=!0):u=e(w);k.push(g(w,t,m,u))}adf.mf.internal.BasePromise.all(k).then(function(){d(m)})})}function k(a,b,c){void 0===a[b]&&(a[b]={invalid:[],required:[]});return a[b]}function m(a,b,c){return new adf.mf.internal.BasePromise(function(d,e){0==a.length?d():amx.getElValue(amx.validationsInvalidListEl).then(function(g){var m=g[1][0].value;g=function(){var a=!1,b={},g;for(g in c.required)if(c.required.hasOwnProperty(g)){var a=!0,h=k(b,g,c);h.required=c.required[g]}for(g in m)if(m.hasOwnProperty(g)){var n=
c.el[g];if(void 0!==n){var t=m[g];if(0==a)for(var u in t)if("ERROR"==t[u].name){a=!0;break}for(var w in n)h=k(b,n[w],c),h.invalid.push(t)}}a?e(b):d(b)};(new adf.mf.internal.BasePromise(function(d,e){if(null==c){var g=function(a){c=a;d()};h(a,b).then(g,g)}else d()})).then(g,g)},function(a){d()})})}function n(a){return new adf.mf.internal.BasePromise(function(b,c){var d=adf.mf.internal.amx._getNonPrimitiveElementData(a,"amxNode");if(null==d&&adf.mf.environment.profile.mockData)b([]);else{var d=d.getTag().getChildren(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,
"validationBehavior"),e=d.length,g=[];if(0<e){for(var h=[],k=[],m=0;m<e;++m){var n=d[m],t=n.getAttribute("disabled");if(null!=t){var u=new adf.mf.internal.BasePromise(function(a,b){amx.getElValue(t).then(function(b){adf.mf.api.amx.isValueTrue(b[1][0].value)||(b=n.getAttribute("group"),0>h.indexOf(b)&&h.push(b));a()},a)});k.push(u)}else u=n.getAttribute("group"),0>h.indexOf(u)&&h.push(u)}adf.mf.internal.BasePromise.all(k).then(function(){var c=y(a,"amx-popup"),d;d=null!=c?c.getElementsByClassName("amx-validationGroup"):
document.getElementsByClassName("amx-validationGroup");for(var c={},e=0;e<d.length;++e){var k=d[e],m=adf.mf.internal.amx._getNonPrimitiveElementData(k,"amxNode").getId();c[m]=k}for(d=0;d<h.length;++d)e=c[h[d]],"undefined"!==typeof e&&g.push(e);b(g)})}else b(g)}},!0)}function t(a,c){K=!1;if(void 0!==a&&0!=a.length){var d=[];if(void 0!==c)for(groupId in c)0!=c.hasOwnProperty(groupId)&&d.push(groupId);b(d)}}function u(a){return new adf.mf.internal.BasePromise(function(b,c){var d=function(a){0==a.length?
b(a):amx.getElValue(amx.validationsUnsetListEl).then(function(d){var e=d[1][0].value,g=null,k=[];(new adf.mf.internal.BasePromise(function(b,c){0<e.length?h(a,!0).then(function(a){g=a;for(a=0;a<e.length;++a){var c=e[a];void 0!==g.el[c]&&k.push(c)}0<k.length?amx.getElValue(k).then(function(a){a=a[1];for(var c=[],d=0;d<a.length;++d){var e=a[d];0>k.indexOf(e.name)||c.push({name:e.name,value:amx.getObjectValue(e.value)})}amx.setElValue(c).then(function(a){b()},function(a){b()})},function(a){b()}):b()},
function(){b()}):b()})).then(function(){m(a,!0,g).then(function(c){b([a,c])},function(b){c([a,b])})})},function(c){b(a)})};n(a).then(d,d)},!0)}function v(a,b){if(void 0==b||void 0==a)return!1;for(;"object"==typeof a;){if(a.constructor==b)return!0;a=a.prototype}return!1}function w(a){a.exception&&(a=a.exception);var b=a.message;a=a.severity;void 0===a&&(a="fatal");adf.mf.api.amx.addMessage(null==a?"severe":a.toLowerCase(),b,null,null)}function x(a){a=D[a];null==a&&(a=1);return a}function z(a,b,c){a=
a.childNodes;var d=a.length,e=b.length,g=[],h=0;if(!1===c)for(c=d-1;0<=c&&h<e;--c)for(var k=a[c],m=0;m<e;++m){if(1==k.nodeType&&k.classList.contains(b[m])){g[m]=k;++h;break}}else for(c=0;c<d&&h<e;++c)for(k=a[c],m=0;m<e;++m)if(1==k.nodeType&&k.classList.contains(b[m])){g[m]=k;++h;break}return g}function y(a,b){return null==a?null:a.className==b?a:y(a.parentNode,b)}function A(){}var D={info:4,confirmation:3,warning:2,error:1,fatal:0},C={4:"Info",3:"Confirmation",2:"Warning",1:"Error",0:"Fatal"},B={Info:"LBL_INFO_DISPLAY_STR",
Confirmation:"LBL_CONFIRMATION_DISPLAY_STR",Warning:"LBL_WARNING_DISPLAY_STR",Error:"LBL_ERROR_DISPLAY_STR",Fatal:"LBL_FATAL_DISPLAY_STR"};amx.validationsUnsetListEl=adf.mf.internal.el.parser.parse("#{validationScope.unsetList}");amx.validationsInvalidListEl=adf.mf.internal.el.parser.parse("#{validationScope.invalidList}");var I={},K=!1;adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"validationGroup").prototype.render=function(a){var b=document.createElement("div");a=a.renderDescendants();
for(var c=0,d=a.length;c<d;++c)b.appendChild(a[c]);return b};amx.isNodeRendered=function(a){if(!a.isReadyToRender())return!1;if(a.getTag().getNsPrefixedName()==adf.mf.api.amx.AmxTag.NAMESPACE_AMX+":popup")return a.getAttribute("_renderPopup")?!0:!1;a=a.getAttribute("visible");return"undefined"!==typeof a&&adf.mf.api.amx.isValueFalse(a)?!1:!0};amx.buildValidationData=function(a){return m(a,!1,null)};amx.requiredControlValueChanged=function(c){!amx.isValidating()&&(c=adf.mf.internal.amx._getNonPrimitiveElementData(c,
"amxNode"))&&(a(c.getId()),b())};amx.isValidating=function(){return K};adf.mf.api.amx.validate=function(a,b){amx.validate(a).then(function(){b&&adf.mf.api.amx.acceptEvent()&&b()})};amx.validate=function(a){var b=adf.mf.internal.perf.startMonitorCall("Validate node",adf.mf.log.level.FINER,"amx.validate");return new adf.mf.internal.BasePromise(function(c,d){K=!0;u(a).then(function(a){t(a[0]);b.stop();c()},function(a){t(a[0],a[1]);b.stop();d()})},!0)};adf.mf.api.addDataChangeListeners(amx.validationsInvalidListEl,
function(a){b()});adf.mf.internal.amx.errorHandlerImpl=function(a,b){if(v(b,window.TrConverterException)||v(b,window.TrValidatorException)){var c=b.getFacesMessage(),d=c.getSeverity(),e="error",e=d==TrFacesMessage.SEVERITY_INFO?"info":d==TrFacesMessage.SEVERITY_WARN?"warning":d==TrFacesMessage.SEVERITY_ERROR?"error":"fatal";adf.mf.api.amx.addMessage(e,c.getDetail(),null,null)}else if(v(b,Error))adf.mf.api.amx.addMessage("error",b.message,null,null);else if(c=b[adf.mf.internal.api.constants.TYPE_PROPERTY],
d="oracle.adfmf.framework.exception.BatchValidationException"==c,!amx.isValidating()||!d&&"oracle.adfmf.framework.exception.ValidationException"!=c)if(d){if(c=b.batch,void 0!==c&&null!=c)for(d=0;d<c.length;++d)w(c[d])}else w(b)};adf.mf.api.amx.addMessage=function(a,b,c,d){d=d=null;d=document.getElementsByClassName("messageBox");0<d.length?(d=d[0],d=adf.mf.internal.amx._getNonPrimitiveElementData(d,"messageBox")):(d=new A,d.create());d.show();d.addItem(a,b,c)};A.prototype.getHeader=function(){var a=
this.contentElement.firstChild;null!=a&&1==a.nodeType&&a.classList.contains("amx-messages-header")||(a=document.createElement("div"),a.className="amx-messages-header",this.contentElement.parentNode.insertBefore(a,this.contentElement));return a};A.prototype.setHeaderLabel=function(a){a=x(a);if(null==this.headerValue||a<this.headerValue){this.headerValue=a;a=this.contentElement.parentNode.querySelectorAll(".amx-messages-header");for(var b=a.length-1;0<=b;--b){var c=a[b];parseInt(c.getAttribute("data-value"),
10)>=this.headerValue&&adf.mf.api.amx.removeDomNode(c)}a=C[this.headerValue];null==a&&(a="Error");b=this.getHeader();b.setAttribute("data-value",this.headerValue);b.innerHTML="";c=document.createElement("div");c.className="amx-messages-header-text";c.textContent=adf.mf.resource.getInfoString(adf.mf.resource.ADFInfoBundleName,B[a]);c.setAttribute("role","heading");b.appendChild(c)}};A.prototype.addItem=function(a,b,c){this.setHeaderLabel(a);switch(x(a)){case 4:a="info";break;case 3:a="confirmation";
break;case 2:a="warning";break;default:a="error"}var d=document.createElement("div");d.className="amx-messages-item";d.setAttribute("role","listitem");var e=document.createElement("div");e.className="amx-messages-text amx-messages-text-"+a+" amx-messages-"+a;e.textContent=b;void 0!==c&&null!=c&&""!=c&&(e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode(c)));b=z(this.contentElement,["amx-messages-item"],!1)[0];c=null;null!=b&&(c=z(b,["amx-messages-text"],!1)[0]);null==
c?e.classList.add("amx-messages-first"):c.classList.remove("amx-messages-last");e.classList.add("amx-messages-last");d.appendChild(e);e=document.createElement("div");e.className="amx-messages-icon amx-messages-icon-"+a;d.appendChild(e);this.contentElement.appendChild(d);a=this.messageBoxElement;d=adf.mf.internal.amx.getComputedStyle(a);e=d.marginBottom;d=a.offsetHeight+parseInt(d.marginTop,10)+parseInt(e,10);e=document.getElementById("bodyPageViews");e=z(e,["amx-view-container"])[0];b=document.body;
null!=e&&(b=z(e,["amx-view"])[0]);e=b.offsetHeight;a.style.top=(d<e?(e-d)/2:0)+"px"};A.prototype.addFooter=function(a){var b=document.createElement("div");b.className="amx-messages-footer";var c=document.createElement("div");c.className="amx-messages-btn amx-commandButton";c.setAttribute("role","button");var d=document.createElement("div");d.className="amx-messages-btn-label amx-commandButton-label";d.textContent=adf.mf.resource.getInfoString(adf.mf.resource.ADFInfoBundleName,"LBL_OK_DISPLAY_STR");
c.appendChild(d);b.appendChild(c);var d="mousedown",e="mouseup";amx.hasTouch()&&(d="touchstart",e="touchend");adf.mf.api.amx.addBubbleEventListener(c,d,function(){c.classList.add("amx-selected")});adf.mf.api.amx.addBubbleEventListener(c,e,function(){c.classList.remove("amx-selected")});adf.mf.api.amx.addBubbleEventListener(c,"mouseout",function(){c.classList.remove("amx-selected")});d=document.createElement("div");d.className="amx-extendedTarget";c.appendChild(d);a.appendChild(b);return c};A.prototype.create=
function(){var a=document.getElementById("bodyPageViews"),b=document.createElement("div");b.id="amxMessageBox";adf.mf.api.amx.enableScrolling(b);b.classList.add("messageBox");var c=document.createElement("div");c.className="transparentScreen messageBoxScreen";a.appendChild(c);a.appendChild(b);adf.mf.internal.amx._setNonPrimitiveElementData(b,"messageBox",this);var d=this;this.e=b;this.screen=c;b.style.display="none";a=document.createElement("div");a.className="messageBoxContainer";a.setAttribute("role",
"alertdialog");b.appendChild(a);c=document.createElement("div");c.className="messageBoxContent";c.setAttribute("role","list");a.appendChild(c);this.contentElement=c;this.messageBoxElement=b;a=this.addFooter(a);adf.mf.api.amx.addBubbleEventListener(a,"tap",function(a){a.preventDefault();a.stopPropagation();setTimeout(function(){d.hide()},0)});return b};A.prototype.show=function(){var a=this.e;this.screen.style.display="";a.style.display="";for(var a=document.getElementsByClassName("amx-view-container"),
b=0,c=a.length;b<c;b++)a[b].setAttribute("aria-hidden","true")};A.prototype.hide=function(){var a=this.e,b=this.screen;this.contentElement.innerHTML="";adf.mf.api.amx.removeDomNode(a);adf.mf.api.amx.removeDomNode(b);for(var a=document.getElementsByClassName("amx-view-container"),b=0,c=a.length;b<c;b++)a[b].setAttribute("aria-hidden","false")}})();